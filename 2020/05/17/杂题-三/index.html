<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>杂题（三） | ruogu's blog</title><meta name="description" content="2020-05-17 ~ 2020-05-30"><meta name="keywords" content="总结"><meta name="author" content="ruogu"><meta name="copyright" content="ruogu"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/nephren.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="杂题（三）"><meta name="twitter:description" content="2020-05-17 ~ 2020-05-30"><meta name="twitter:image" content="http://ruogu-alter.github.io/img/saber.jpg"><meta property="og:type" content="article"><meta property="og:title" content="杂题（三）"><meta property="og:url" content="http://ruogu-alter.github.io/2020/05/17/%E6%9D%82%E9%A2%98-%E4%B8%89/"><meta property="og:site_name" content="ruogu's blog"><meta property="og:description" content="2020-05-17 ~ 2020-05-30"><meta property="og:image" content="http://ruogu-alter.github.io/img/saber.jpg"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://ruogu-alter.github.io/2020/05/17/%E6%9D%82%E9%A2%98-%E4%B8%89/"><link rel="prev" title="soj947" href="http://ruogu-alter.github.io/2020/05/20/soj947/"><link rel="next" title="2018syc（一）" href="http://ruogu-alter.github.io/2020/05/16/2018syc%EF%BC%88%E4%B8%80%EF%BC%89/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'true',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/bx.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">23</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">17</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#uoj516-矩阵乘法"><span class="toc-number">1.</span> <span class="toc-text"> uoj516 矩阵乘法</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#nowcoder-5555a-动态规划"><span class="toc-number">2.</span> <span class="toc-text"> nowcoder 5555a 动态规划</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#nowcoder-5555b-数据结构"><span class="toc-number">3.</span> <span class="toc-text"> nowcoder 5555b 数据结构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#loj2305-2-sat"><span class="toc-number">4.</span> <span class="toc-text"> loj2305 2-sat</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#loj3045-生成函数fwt"><span class="toc-number">5.</span> <span class="toc-text"> loj3045 生成函数&#x2F;fwt</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#nowcoder-5555c-动态规划"><span class="toc-number">6.</span> <span class="toc-text"> nowcoder 5555c 动态规划</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#soj945-贪心构造"><span class="toc-number">7.</span> <span class="toc-text"> soj945 贪心&#x2F;构造</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#abc168f-离散化bfs"><span class="toc-number">8.</span> <span class="toc-text"> abc168f 离散化&#x2F;BFS</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/img/saber.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">ruogu's blog</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">杂题（三）</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-05-17 21:03:55"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-05-17</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-05-20 23:14:15"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-05-20</span></time></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><span class="disqus-comment-count comment-count"><a href="http://ruogu-alter.github.io/2020/05/17/%E6%9D%82%E9%A2%98-%E4%B8%89/#disqus_thread"></a></span></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h4 id="uoj516-矩阵乘法"><a class="markdownIt-Anchor" href="#uoj516-矩阵乘法"></a> uoj516 矩阵乘法</h4>
<p><a href="http://uoj.ac/problem/516" target="_blank" rel="noopener">http://uoj.ac/problem/516</a></p>
<p>这题我不会。。看了别人代码才会。</p>
<p>考虑<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">f_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>表示后<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo stretchy="false">[</mo><mi>i</mi><mi mathvariant="normal">.</mi><mi mathvariant="normal">.</mi><mi>n</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">s[i..n]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mord">.</span><span class="mord">.</span><span class="mord mathdefault">n</span><span class="mclose">]</span></span></span></span>形成的字符串，那么<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>f</mi><mi>i</mi></msub><mo>=</mo><msub><mi>f</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub><mo>+</mo><msub><mi>s</mi><mi>i</mi></msub><mo>+</mo><msub><mi>f</mi><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow></msub></mrow><annotation encoding="application/x-tex">f_i=f_{i+1}+s_i+f_{i+1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.902771em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.73333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.902771em;vertical-align:-0.208331em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mbin mtight">+</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span></span></span></span>，其中<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo>+</mo></mrow><annotation encoding="application/x-tex">+</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord">+</span></span></span></span>表示拼接。</p>
<p>那么考虑转化成类似子序列自动机形式，或者可以说直接转化成矩阵，就直接如上面的柿子一样乘一下就行。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;Author:xht37</span><br><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line"></span><br><span class="line">#define ui unsigned int</span><br><span class="line">#define ll long long</span><br><span class="line">#define ul unsigned ll</span><br><span class="line">#define ld long double</span><br><span class="line"></span><br><span class="line">#define pi pair&lt; int, int &gt;</span><br><span class="line">#define fi first</span><br><span class="line">#define se second</span><br><span class="line">#define mp make_pair</span><br><span class="line"></span><br><span class="line">#define ls (p &lt;&lt; 1)</span><br><span class="line">#define rs (ls | 1)</span><br><span class="line">#define md ((t[p].l + t[p].r) &gt;&gt; 1)</span><br><span class="line"></span><br><span class="line">#define pq priority_queue</span><br><span class="line">#define pb push_back</span><br><span class="line">#define vi vector&lt; int &gt;</span><br><span class="line">#define si set&lt; int &gt;::iterator</span><br><span class="line"></span><br><span class="line">#define fl(x) freopen(x&quot;.in&quot;, &quot;r&quot;, stdin), freopen(x&quot;.out&quot;, &quot;w&quot;, stdout);</span><br><span class="line"></span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">namespace io &#123;</span><br><span class="line">	const int SI &#x3D; 1 &lt;&lt; 21 | 1;</span><br><span class="line">	char IB[SI], *IS, *IT, OB[SI], *OS &#x3D; OB, *OT &#x3D; OS + SI - 1, c, ch[100];</span><br><span class="line">	int f, t;</span><br><span class="line">	#define gc() (IS &#x3D;&#x3D; IT ? (IT &#x3D; (IS &#x3D; IB) + fread(IB, 1, SI, stdin), IS &#x3D;&#x3D; IT ? EOF : *IS++) : *IS++)</span><br><span class="line">	inline void flush() &#123;</span><br><span class="line">		fwrite(OB, 1, OS - OB, stdout), OS &#x3D; OB;</span><br><span class="line">	&#125;</span><br><span class="line">	inline void pc(char x) &#123;</span><br><span class="line">		*OS++ &#x3D; x;</span><br><span class="line">		if (OS &#x3D;&#x3D; OT) flush();</span><br><span class="line">	&#125;</span><br><span class="line">	template&lt;class I&gt;</span><br><span class="line">	inline void rd(I &amp;x) &#123;</span><br><span class="line">		for (f &#x3D; 1, c &#x3D; gc(); c &lt; &#39;0&#39; || c &gt; &#39;9&#39;; c &#x3D; gc()) if (c &#x3D;&#x3D; &#39;-&#39;) f &#x3D; -1;</span><br><span class="line">		for (x &#x3D; 0; c &gt;&#x3D; &#39;0&#39; &amp;&amp; c &lt;&#x3D; &#39;9&#39;; x &#x3D; (x &lt;&lt; 3) + (x &lt;&lt; 1) + (c &amp; 15), c &#x3D; gc());</span><br><span class="line">		x *&#x3D; f;</span><br><span class="line">	&#125;</span><br><span class="line">	inline void rds(char *s, int &amp;x) &#123;</span><br><span class="line">		for (c &#x3D; gc(); c &lt; 33 || c &gt; 126; c &#x3D; gc());</span><br><span class="line">		for (x &#x3D; 0; c &gt;&#x3D; 33 &amp;&amp; c &lt;&#x3D; 126; s[++x] &#x3D; c, c &#x3D; gc());</span><br><span class="line">		s[x+1] &#x3D; &#39;\0&#39;;</span><br><span class="line">	&#125;</span><br><span class="line">	template&lt;class I&gt;</span><br><span class="line">	inline void print(I x, char k &#x3D; &#39;\n&#39;) &#123;</span><br><span class="line">		if (!x) pc(&#39;0&#39;);</span><br><span class="line">		if (x &lt; 0) pc(&#39;-&#39;), x &#x3D; -x;</span><br><span class="line">		while (x) ch[++t] &#x3D; x % 10 + &#39;0&#39;, x &#x2F;&#x3D; 10;</span><br><span class="line">		while (t) pc(ch[t--]);</span><br><span class="line">		pc(k);</span><br><span class="line">	&#125;</span><br><span class="line">	struct Flush &#123;</span><br><span class="line">		~Flush() &#123;</span><br><span class="line">			flush();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125; flusher;</span><br><span class="line">&#125;</span><br><span class="line">using io::rd;</span><br><span class="line">using io::rds;</span><br><span class="line">using io::print;</span><br><span class="line"></span><br><span class="line">namespace Rd &#123;</span><br><span class="line">	inline bool gt() &#123;</span><br><span class="line">		int a &#x3D; rand(), b &#x3D; rand();</span><br><span class="line">		while (a &#x3D;&#x3D; b) a &#x3D; rand(), b &#x3D; rand();</span><br><span class="line">		return a &lt; b;</span><br><span class="line">	&#125;</span><br><span class="line">	template&lt;class I&gt;</span><br><span class="line">	inline I Rand(I k) &#123;</span><br><span class="line">		if (!k) return 0;</span><br><span class="line">		I w &#x3D; 1;</span><br><span class="line">		while (w &lt; k) w &lt;&lt;&#x3D; 1;</span><br><span class="line">		while (w &gt;&#x3D; k) &#123;</span><br><span class="line">			I o &#x3D; 1, x &#x3D; 0;</span><br><span class="line">			while (o &lt; k) o &lt;&lt;&#x3D; 1, x &#x3D; (x &lt;&lt; 1) + gt();</span><br><span class="line">			w &#x3D; x;</span><br><span class="line">		&#125;</span><br><span class="line">		return w;</span><br><span class="line">	&#125;</span><br><span class="line">	template&lt;class I&gt;</span><br><span class="line">	inline I rdm(I l, I r) &#123;</span><br><span class="line">		return l + Rand(r - l + 1);</span><br><span class="line">	&#125;</span><br><span class="line">	template&lt;class I&gt;</span><br><span class="line">	inline void rdms(I *a, int n) &#123;</span><br><span class="line">		pair&lt; int, I &gt; p[n+1];</span><br><span class="line">		map&lt; int, bool &gt; m;</span><br><span class="line">		m.clear();</span><br><span class="line">		for (int i &#x3D; 1; i &lt;&#x3D; n; i++) &#123;</span><br><span class="line">			int o &#x3D; rdm(0, 1000000000);</span><br><span class="line">			while (m[o]) o &#x3D; rdm(0, 1000000000);</span><br><span class="line">			m[o] &#x3D; 1;</span><br><span class="line">			p[i] &#x3D; mp(o, a[i]);</span><br><span class="line">		&#125;</span><br><span class="line">		sort(p + 1, p + n + 1);</span><br><span class="line">		for (int i &#x3D; 1; i &lt;&#x3D; n; i++) a[i] &#x3D; p[i].se;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">using Rd::gt;</span><br><span class="line">using Rd::rdm;</span><br><span class="line">using Rd::rdms;</span><br><span class="line"></span><br><span class="line">namespace kc &#123;</span><br><span class="line">	template&lt;class I&gt;</span><br><span class="line">	inline I Min(I x, I y) &#123;</span><br><span class="line">		return x &lt; y ? x : y;</span><br><span class="line">	&#125;</span><br><span class="line">	template&lt;class I&gt;</span><br><span class="line">	inline I Max(I x, I y) &#123;</span><br><span class="line">		return x &gt; y ? x : y;</span><br><span class="line">	&#125;</span><br><span class="line">	template&lt;class I&gt;</span><br><span class="line">	inline void Swp(I &amp;x, I &amp;y) &#123;</span><br><span class="line">		x ^&#x3D; y ^&#x3D; x ^&#x3D; y;</span><br><span class="line">	&#125;</span><br><span class="line">	template&lt;class I&gt;</span><br><span class="line">	inline I Abs(I x) &#123;</span><br><span class="line">		return x &gt;&#x3D; 0 ? x : -x;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">using kc::Min;</span><br><span class="line">using kc::Max;</span><br><span class="line">using kc::Swp;</span><br><span class="line">using kc::Abs;</span><br><span class="line"></span><br><span class="line">namespace Md &#123;</span><br><span class="line">	const int P &#x3D; 998244353;</span><br><span class="line">	inline int Add(int a, int b) &#123;</span><br><span class="line">		return a + b &gt;&#x3D; P ? a + b - P : a + b;</span><br><span class="line">	&#125;</span><br><span class="line">	inline int Sub(int a, int b) &#123;</span><br><span class="line">		return a - b &lt; 0 ? a - b + P : a - b;</span><br><span class="line">	&#125;</span><br><span class="line">	inline int Mul(int a, int b) &#123;</span><br><span class="line">		return 1ll * a * b % P;</span><br><span class="line">	&#125;</span><br><span class="line">	inline int ksm(int a, ll b &#x3D; P - 2) &#123;</span><br><span class="line">		b %&#x3D; P - 1;</span><br><span class="line">		int c &#x3D; 1;</span><br><span class="line">		while (b) &#123;</span><br><span class="line">			if (b &amp; 1) c &#x3D; Mul(c, a);</span><br><span class="line">			a &#x3D; Mul(a, a), b &gt;&gt;&#x3D; 1;</span><br><span class="line">		&#125;</span><br><span class="line">		return c;</span><br><span class="line">	&#125;</span><br><span class="line">	inline int Div(int a, int b) &#123;</span><br><span class="line">		return 1ll * a * ksm(b) % P;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line">using Md::Add;</span><br><span class="line">using Md::Sub;</span><br><span class="line">using Md::Mul;</span><br><span class="line">using Md::Div;</span><br><span class="line">using Md::ksm;</span><br><span class="line"></span><br><span class="line">const int N &#x3D; 2e3 + 7, M &#x3D; 27;</span><br><span class="line">int n, ans;</span><br><span class="line">char s[N];</span><br><span class="line"></span><br><span class="line">struct Mat &#123;</span><br><span class="line">	int a[M][M];</span><br><span class="line">	inline Mat() &#123;</span><br><span class="line">		memset(a, 0, sizeof(a));</span><br><span class="line">	&#125;</span><br><span class="line">	inline friend Mat operator * (Mat a, Mat b) &#123;</span><br><span class="line">		Mat c &#x3D; Mat();</span><br><span class="line">		for (int i &#x3D; 0; i &lt; M; i++)</span><br><span class="line">			for (int k &#x3D; 0; k &lt; M; k++)</span><br><span class="line">				for (int j &#x3D; 0; j &lt; M; j++)</span><br><span class="line">					c.a[i][j] &#x3D; Add(c.a[i][j], Mul(a.a[i][k], b.a[k][j]));</span><br><span class="line">		return c;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; x, a[M];</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">	rd(n), rds(s, n), x &#x3D; Mat();</span><br><span class="line">	for (int i &#x3D; 0; i &lt; M; i++) x.a[i][i] &#x3D; 1;</span><br><span class="line">	for (int i &#x3D; 0; i &lt; M - 1; i++)</span><br><span class="line">		for (int j &#x3D; 0; j &lt; M; j++)</span><br><span class="line">			if (i ^ j) a[i].a[j][j] &#x3D; 1;</span><br><span class="line">			else for (int k &#x3D; 0; k &lt; M; k++)</span><br><span class="line">				a[i].a[i][k] &#x3D; 1;</span><br><span class="line">	for (int i &#x3D; n; i; i--) x &#x3D; x * a[s[i]-&#39;a&#39;] * x;</span><br><span class="line">	for (int i &#x3D; 0; i &lt; M - 1; i++) ans &#x3D; Add(ans, x.a[i][26]);</span><br><span class="line">	print(ans);</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>（复制了别人代码，侵删）</p>
<br/>
<h4 id="nowcoder-5555a-动态规划"><a class="markdownIt-Anchor" href="#nowcoder-5555a-动态规划"></a> nowcoder 5555a 动态规划</h4>
<p><a href="https://ac.nowcoder.com/acm/contest/5555/A" target="_blank" rel="noopener">https://ac.nowcoder.com/acm/contest/5555/A</a></p>
<p>首先要把<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mi>m</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{m}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.23972em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault">m</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,
-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,
-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,
35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,
-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467
s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422
s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span></span></span></span>拆成<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><msqrt><mrow><mo>∏</mo><msub><mi>p</mi><mi>i</mi></msub></mrow></msqrt></mrow><annotation encoding="application/x-tex">k\sqrt{\prod{p_i}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.24em;vertical-align:-0.30500499999999997em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.934995em;"><span class="svg-align" style="top:-3.2em;"><span class="pstrut" style="height:3.2em;"></span><span class="mord" style="padding-left:1em;"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">∏</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-2.894995em;"><span class="pstrut" style="height:3.2em;"></span><span class="hide-tail" style="min-width:1.02em;height:1.28em;"><svg width='400em' height='1.28em' viewBox='0 0 400000 1296' preserveAspectRatio='xMinYMin slice'><path d='M263,681c0.7,0,18,39.7,52,119c34,79.3,68.167,
158.7,102.5,238c34.3,79.3,51.8,119.3,52.5,120c340,-704.7,510.7,-1060.3,512,-1067
c4.7,-7.3,11,-11,19,-11H40000v40H1012.3s-271.3,567,-271.3,567c-38.7,80.7,-84,
175,-136,283c-52,108,-89.167,185.3,-111.5,232c-22.3,46.7,-33.8,70.3,-34.5,71
c-4.7,4.7,-12.3,7,-23,7s-12,-1,-12,-1s-109,-253,-109,-253c-72.7,-168,-109.3,
-252,-110,-252c-10.7,8,-22,16.7,-34,26c-22,17.3,-33.3,26,-34,26s-26,-26,-26,-26
s76,-59,76,-59s76,-60,76,-60z M1001 80H40000v40H1012z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.30500499999999997em;"><span></span></span></span></span></span></span></span></span>的形式。这时就是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">m</span></span></span></span>划分成<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>个的方案数。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo separator="true">,</mo><mi>m</mi><mo>≤</mo><mn>1000</mn></mrow><annotation encoding="application/x-tex">n,m\leq 1000</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">0</span></span></span></span></p>
<p>我tm写了个按<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mi>m</mi></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{m}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.23972em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault">m</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,
-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,
-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,
35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,
-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467
s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422
s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span></span></span></span>分类的方法，竟然过了。。</p>
<p>正解是考虑加一个数或者整体加<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair &lt;int, int&gt;</span><br><span class="line">#define iiii pair &lt;int, pii &gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define rep(i, x) for(int (i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">  int x &#x3D; 0, p &#x3D; 1; char c &#x3D; getchar();</span><br><span class="line">  while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">  if (c &#x3D;&#x3D; 45) p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">  while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">  return x * p;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">const int mod &#x3D; 998244353;</span><br><span class="line">inline void reduce(int &amp;x) &#123; x +&#x3D; x &gt;&gt; 31 &amp; mod; &#125;</span><br><span class="line">inline int mul(int x, int y) &#123; return 1ll * x * y % mod; &#125;</span><br><span class="line">&#x2F;&#x2F;ruogu_alter</span><br><span class="line">const int N &#x3D; 1005;</span><br><span class="line">int g[N][N], f[N][N], n, m;</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">int main() &#123;</span><br><span class="line">  n &#x3D; getint(); m &#x3D; getint(); int val &#x3D; 1;</span><br><span class="line">  for (int i &#x3D; 2; i * i &lt;&#x3D; m; i++) &#123;</span><br><span class="line">    if (m % (i * i)) continue;</span><br><span class="line">    while (m % (i * i) &#x3D;&#x3D; 0) m &#x2F;&#x3D; (i * i), val *&#x3D; i;</span><br><span class="line">  &#125;</span><br><span class="line">  m &#x3D; val;</span><br><span class="line">  f[0][0] &#x3D; 1;</span><br><span class="line">  for (int i &#x3D; 0; i &lt;&#x3D; min(35, m); i++) &#123;</span><br><span class="line">    for (int j &#x3D; 1; j &lt;&#x3D; n; j++) &#123;</span><br><span class="line">      for (int k &#x3D; i; k &lt;&#x3D; m; k++) &#123;</span><br><span class="line">        reduce(f[j][k] +&#x3D; f[j - 1][k - i] - mod);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  g[0][0] &#x3D; 1;</span><br><span class="line">  for (int i &#x3D; 36; i &lt;&#x3D; m; i++) &#123;</span><br><span class="line">    for (int j &#x3D; 1; j &lt;&#x3D; min(n, 35); j++) &#123;</span><br><span class="line">      for (int k &#x3D; i; k &lt;&#x3D; m; k++) &#123;</span><br><span class="line">        reduce(g[j][k] +&#x3D; g[j - 1][k - i] - mod);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  int res &#x3D; 0;</span><br><span class="line">  rep(i, n + 1) rep(j, m + 1) reduce(res +&#x3D; mul(f[i][j], g[n - i][m - j]) - mod);</span><br><span class="line">  cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br/>
<h4 id="nowcoder-5555b-数据结构"><a class="markdownIt-Anchor" href="#nowcoder-5555b-数据结构"></a> nowcoder 5555b 数据结构</h4>
<p><a href="https://ac.nowcoder.com/acm/contest/5555/B" target="_blank" rel="noopener">https://ac.nowcoder.com/acm/contest/5555/B</a></p>
<p>考试的时候，我想了许多种不同的没有考虑随机数的方法，大概是小常数的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><msup><mo><mi>log</mi><mo>⁡</mo></mo><mn>2</mn></msup><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n\log^2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.148448em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8984479999999999em;"><span style="top:-3.1473400000000002em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>，但是都是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>l</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">mle</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">e</span></span></span></span>，大抵都要维护哈希表。</p>
<p>其实发现对于每<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>16</mn></mrow><annotation encoding="application/x-tex">16</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">6</span></span></span></span>位分一块的话，必然有一块是完全相同的。就插入到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>v</mi><mi>e</mi><mi>c</mi><mi>t</mi><mi>o</mi><mi>r</mi></mrow><annotation encoding="application/x-tex">vector</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord mathdefault">e</span><span class="mord mathdefault">c</span><span class="mord mathdefault">t</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span></span></span></span>里就很轻易的过了。。awsl</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define fo(i, x, y) for(int i &#x3D; x, _b &#x3D; y; i &lt;&#x3D; _b; i ++)</span><br><span class="line">#define ff(i, x, y) for(int i &#x3D; x, _b &#x3D; y; i &lt;  _b; i ++)</span><br><span class="line">#define fd(i, x, y) for(int i &#x3D; x, _b &#x3D; y; i &gt;&#x3D; _b; i --)</span><br><span class="line">#define ll long long</span><br><span class="line">#define pp printf</span><br><span class="line">#define hh pp(&quot;\n&quot;)</span><br><span class="line">using namespace std;</span><br><span class="line"> </span><br><span class="line">int n, m;</span><br><span class="line"> </span><br><span class="line">#define ull unsigned long long</span><br><span class="line"> </span><br><span class="line">ull G(ull x) &#123;</span><br><span class="line">    x^&#x3D;x&lt;&lt;13;</span><br><span class="line">    x^&#x3D;x&gt;&gt;7;</span><br><span class="line">    x^&#x3D;x&lt;&lt;17;</span><br><span class="line">    return x;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">const int N &#x3D; 1e6 + 5;</span><br><span class="line"> </span><br><span class="line">ull a[N];</span><br><span class="line"> </span><br><span class="line">ull x;</span><br><span class="line"> </span><br><span class="line">vector&lt;int&gt; d[4][1 &lt;&lt; 16];</span><br><span class="line"> </span><br><span class="line">ull zh(ull x, int y) &#123;</span><br><span class="line">    return x &gt;&gt; (16 * y) &amp; 65535;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">#define low(x) ((x) &amp; -(x))</span><br><span class="line"> </span><br><span class="line">int pd(ull x, ull y) &#123;</span><br><span class="line">    x ^&#x3D; y;</span><br><span class="line">    int s &#x3D; 0;</span><br><span class="line">    for(; x &amp;&amp; s &lt;&#x3D; 3; x -&#x3D; low(x))   s ++;</span><br><span class="line">    return s &lt;&#x3D; 3;</span><br><span class="line">&#125;</span><br><span class="line"> </span><br><span class="line">const int mo &#x3D; 998244353;</span><br><span class="line"> </span><br><span class="line">ll ans;</span><br><span class="line"> </span><br><span class="line">int main() &#123;</span><br><span class="line">&#x2F;&#x2F;  freopen(&quot;a.in&quot;, &quot;r&quot;, stdin) ;</span><br><span class="line">    scanf(&quot;%d %d&quot;, &amp;n, &amp;m);</span><br><span class="line">    scanf(&quot;%llu&quot;, &amp;a[0]);</span><br><span class="line">    fo(i, 1, n) a[i] &#x3D; G(a[i - 1]);</span><br><span class="line">    fo(i, 0, n - 1) &#123;</span><br><span class="line">        fo(j ,0, 3) &#123;</span><br><span class="line">            d[j][zh(a[i], j)].push_back(i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    fo(i, 1, m)  &#123;</span><br><span class="line">        scanf(&quot;%llu&quot;, &amp;x);</span><br><span class="line">        int ye &#x3D; 0;</span><br><span class="line">        fo(j ,0, 3) &#123;</span><br><span class="line">            int v &#x3D; zh(x, j);</span><br><span class="line">            ff(k, 0, d[j][v].size()) &#123;</span><br><span class="line">                int y &#x3D; d[j][v][k];</span><br><span class="line">                if(pd(x, a[y])) &#123;</span><br><span class="line">                    ye &#x3D; 1; break;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            if(ye) break;</span><br><span class="line">        &#125;</span><br><span class="line">        ans &#x3D; (ans * 2 + ye) % mo;</span><br><span class="line">    &#125;</span><br><span class="line">    pp(&quot;%lld\n&quot;, ans);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>侵删</p>
<br/>
<h4 id="loj2305-2-sat"><a class="markdownIt-Anchor" href="#loj2305-2-sat"></a> loj2305 2-sat</h4>
<p>我竟然一时半会想不清楚2-sat怎么输出方案。。直到看了板子。</p>
<p>有两个注意点：</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1.</mn></mrow><annotation encoding="application/x-tex">1.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span></span></span></span>tarjan获得的顺序反过来就是拓扑序；</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2.</mn></mrow><annotation encoding="application/x-tex">2.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">.</span></span></span></span>就是要求尽可能取拓扑序大的然后判一下合不合法。</p>
<p>然后就是考虑这个三进制的状态其实用二进制枚举就已经可以包含所有情况了。复杂度是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><msup><mn>2</mn><mi>d</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n2^d)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.099108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">d</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。</p>
<p>注意这题现场没有spj，所以可能需要自己手写一个spj。但是这题的spj应该不算太难写。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair&lt;int, int&gt;</span><br><span class="line">#define iiii pair&lt;int, pii&gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define rep(i, x) for (int(i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">    int x &#x3D; 0, p &#x3D; 1;</span><br><span class="line">    char c &#x3D; getchar();</span><br><span class="line">    while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">    if (c &#x3D;&#x3D; 45)</span><br><span class="line">        p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">    while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">    return x * p;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">const int mod &#x3D; 1e9 + 7;</span><br><span class="line">inline void reduce(int &amp;x) &#123; x +&#x3D; x &gt;&gt; 31 &amp; mod; &#125;</span><br><span class="line">inline int mul(int x, int y) &#123; return 1ll * x * y % mod; &#125;</span><br><span class="line">&#x2F;&#x2F; ruogu_alter</span><br><span class="line">mt19937 rnd(time(0));</span><br><span class="line">vector&lt;pii&gt; ex, ey;</span><br><span class="line">const int N &#x3D; 1e5 + 5;</span><br><span class="line">int n, m, a[N], dfn[N], low[N], c, cnt, blo[N];</span><br><span class="line">bool inst[N];</span><br><span class="line">vector&lt;int&gt; st, g[N];</span><br><span class="line">char s[N];</span><br><span class="line">vector&lt;int&gt; v;</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">void tarjan(int x) &#123;</span><br><span class="line">    dfn[x] &#x3D; low[x] &#x3D; ++cnt;</span><br><span class="line">    inst[x] &#x3D; true;</span><br><span class="line">    st.emplace_back(x);</span><br><span class="line">    for (int to : g[x]) &#123;</span><br><span class="line">        if (!dfn[to]) &#123;</span><br><span class="line">            tarjan(to);</span><br><span class="line">            low[x] &#x3D; min(low[x], low[to]);</span><br><span class="line">        &#125; else if (inst[to]) &#123;</span><br><span class="line">            low[x] &#x3D; min(low[x], dfn[to]);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    if (low[x] &#x3D;&#x3D; dfn[x]) &#123;</span><br><span class="line">        ++c;</span><br><span class="line">        int y &#x3D; -1;</span><br><span class="line">        while (y !&#x3D; x) &#123;</span><br><span class="line">            blo[y &#x3D; st.back()] &#x3D; c;</span><br><span class="line">            st.pop_back();</span><br><span class="line">            inst[y] &#x3D; false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">inline void add(int x, int y) &#123; g[x].emplace_back(y); &#125;</span><br><span class="line">inline int getid(int x, int y) &#123; return (y - (y &gt;&#x3D; a[x])) * n + x; &#125;</span><br><span class="line">inline int op(int x) &#123; return x &lt; n ? x + n : x - n; &#125;</span><br><span class="line">void solve() &#123;</span><br><span class="line">    rep(i, n + n) g[i].clear();</span><br><span class="line">    cnt &#x3D; c &#x3D; 0;</span><br><span class="line">    rep(i, m) &#123;</span><br><span class="line">        int x &#x3D; ex[i].first, xx &#x3D; ex[i].second, vx &#x3D; getid(x, xx);</span><br><span class="line">        int y &#x3D; ey[i].first, yy &#x3D; ey[i].second;</span><br><span class="line">        if (a[x] &#x3D;&#x3D; xx)</span><br><span class="line">            continue;</span><br><span class="line">        if (a[y] &#x3D;&#x3D; yy)</span><br><span class="line">            add(vx, op(vx));</span><br><span class="line">        else &#123;</span><br><span class="line">            int vy &#x3D; getid(y, yy);</span><br><span class="line">            add(vx, vy);</span><br><span class="line">            add(op(vy), op(vx));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    memset(dfn, 0, sizeof(dfn));</span><br><span class="line">    rep(i, n + n) if (!dfn[i]) tarjan(i);</span><br><span class="line">    rep(i, n) if (blo[i] &#x3D;&#x3D; blo[i + n]) return;</span><br><span class="line">    rep(i, n) &#123;</span><br><span class="line">        if (blo[i] &lt; blo[i + n])</span><br><span class="line">            putchar(&#39;A&#39; + (!a[i]));</span><br><span class="line">        else</span><br><span class="line">            putchar(&#39;B&#39; + (a[i] !&#x3D; 2));</span><br><span class="line">    &#125;</span><br><span class="line">    exit(0);</span><br><span class="line">&#125;</span><br><span class="line">void dfs(int x) &#123;</span><br><span class="line">    if (x &#x3D;&#x3D; v.size()) &#123;</span><br><span class="line">        solve();</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    a[v[x]] &#x3D; rnd() % 3;</span><br><span class="line">    dfs(x + 1);</span><br><span class="line">    int y;</span><br><span class="line">    while ((y &#x3D; rnd() % 3) &#x3D;&#x3D; a[v[x]])</span><br><span class="line">        ;</span><br><span class="line">    a[v[x]] &#x3D; y;</span><br><span class="line">    dfs(x + 1);</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">    n &#x3D; getint();</span><br><span class="line">    m &#x3D; getint();</span><br><span class="line">    scanf(&quot;%s&quot;, s);</span><br><span class="line">    rep(i, n) a[i] &#x3D; s[i] - &#39;a&#39;;</span><br><span class="line">    m &#x3D; getint();</span><br><span class="line">    rep(i, m) &#123;</span><br><span class="line">        char cx, cy;</span><br><span class="line">        int x &#x3D; getint() - 1;</span><br><span class="line">        scanf(&quot;%c&quot;, &amp;cx);</span><br><span class="line">        int y &#x3D; getint() - 1;</span><br><span class="line">        scanf(&quot;%c&quot;, &amp;cy);</span><br><span class="line">        ex.emplace_back(x, cx - &#39;A&#39;);</span><br><span class="line">        ey.emplace_back(y, cy - &#39;A&#39;);</span><br><span class="line">    &#125;</span><br><span class="line">    rep(i, n) if (s[i] &#x3D;&#x3D; &#39;x&#39;) &#123; v.emplace_back(i); &#125;</span><br><span class="line">    dfs(0);</span><br><span class="line">    printf(&quot;%d\n&quot;, -1);</span><br><span class="line">    return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br/>
<h4 id="loj3045-生成函数fwt"><a class="markdownIt-Anchor" href="#loj3045-生成函数fwt"></a> loj3045 生成函数/fwt</h4>
<p><a href="https://loj.ac/problem/3045" target="_blank" rel="noopener">https://loj.ac/problem/3045</a></p>
<p>这题的生成函数做法没看懂过，但是这题的fwt做法非常精彩，可以反复阅读。</p>
<p>有个注意，\sum\limits_{T}(-1)^{|T \and U|}，当<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>U</mi></mrow><annotation encoding="application/x-tex">U</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.10903em;">U</span></span></span></span>非空，结果是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair &lt;int, int&gt;</span><br><span class="line">#define iiii pair &lt;int, pii &gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define rep(i, x) for(int (i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">  int x &#x3D; 0, p &#x3D; 1; char c &#x3D; getchar();</span><br><span class="line">  while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">  if (c &#x3D;&#x3D; 45) p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">  while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">  return x * p;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">const int mod &#x3D; 998244353;</span><br><span class="line">inline void reduce(int &amp;x) &#123; x +&#x3D; x &gt;&gt; 31 &amp; mod; &#125;</span><br><span class="line">inline int mul(int x, int y) &#123; return 1ll * x * y % mod; &#125;</span><br><span class="line">&#x2F;&#x2F;ruogu_alter</span><br><span class="line">const int N &#x3D; 5e4 + 5;</span><br><span class="line">int n, a[N], f[2][N];</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">int modpow(int x, int y) &#123;</span><br><span class="line">  int ans &#x3D; 1;</span><br><span class="line">  while (y) &#123;</span><br><span class="line">    if (y &amp; 1) ans &#x3D; mul(ans, x);</span><br><span class="line">    x &#x3D; mul(x, x);</span><br><span class="line">    y &gt;&gt;&#x3D; 1;</span><br><span class="line">  &#125;</span><br><span class="line">  return ans;</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">  n &#x3D; getint();</span><br><span class="line">  rep(i, n) a[i] &#x3D; getint();</span><br><span class="line">  f[0][0] &#x3D; 1; int sum &#x3D; 0; </span><br><span class="line">  rep(ii, n) &#123;</span><br><span class="line">    int x &#x3D; getint(); sum +&#x3D; x;</span><br><span class="line">    for (int j &#x3D; sum; j &gt;&#x3D; x; --j) &#123;</span><br><span class="line">      reduce(f[0][j] +&#x3D; f[a[ii]][j - x] - mod);</span><br><span class="line">      reduce(f[1][j] +&#x3D; f[a[ii] ^ 1][j - x] - mod);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  int res &#x3D; 0;</span><br><span class="line">  for (int i &#x3D; 1; i &lt;&#x3D; sum; i++) &#123;</span><br><span class="line">    reduce(res +&#x3D; mul(modpow(i, mod - 2), f[1][i]) - mod);</span><br><span class="line">  &#125;</span><br><span class="line">  cout &lt;&lt; mul(sum, res) &lt;&lt; endl;</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br/>
<h4 id="nowcoder-5555c-动态规划"><a class="markdownIt-Anchor" href="#nowcoder-5555c-动态规划"></a> nowcoder 5555c 动态规划</h4>
<p><a href="https://ac.nowcoder.com/acm/contest/5555/C" target="_blank" rel="noopener">https://ac.nowcoder.com/acm/contest/5555/C</a></p>
<p>这题有两个套路，拼起来就是一道我不会的题。。（逃</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1.</mn></mrow><annotation encoding="application/x-tex">1.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span></span></span></span>计算两个字符串交换的权值，对于每个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>，考虑两个串<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mn>1..</mn><mi>i</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1..i]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mord">.</span><span class="mord">.</span><span class="mord mathdefault">i</span><span class="mclose">]</span></span></span></span>中<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>的个数的差值，求和。</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2.</mn></mrow><annotation encoding="application/x-tex">2.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">.</span></span></span></span>怎么统计？数位<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>p</mi></mrow><annotation encoding="application/x-tex">dp</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">p</span></span></span></span>，维护两个数组，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi></mrow><annotation encoding="application/x-tex">f</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span></span></span></span>表示权值和，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span>表示满足这个情况的串的个数。</p>
<p>具体</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>x</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>y</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>a</mi><mo stretchy="false">]</mo><mo stretchy="false">[</mo><mi>b</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[x][y][a][b]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault">x</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault">a</span><span class="mclose">]</span><span class="mopen">[</span><span class="mord mathdefault">b</span><span class="mclose">]</span></span></span></span>四维表示前<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>个字符，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>的个数差值为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>j</mi></mrow><annotation encoding="application/x-tex">j</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.85396em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05724em;">j</span></span></span></span>，第一个串、第二个串是否已经小于<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span>的方案数。</p>
<p>连这种题都不会，我真sl。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair &lt;int, int&gt;</span><br><span class="line">#define iiii pair &lt;int, pii &gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define rep(i, x) for(int (i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">  int x &#x3D; 0, p &#x3D; 1; char c &#x3D; getchar();</span><br><span class="line">  while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">  if (c &#x3D;&#x3D; 45) p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">  while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">  return x * p;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">const int mod &#x3D; 998244353;</span><br><span class="line">inline void reduce(int &amp;x) &#123; x +&#x3D; x &gt;&gt; 31 &amp; mod; &#125;</span><br><span class="line">inline int mul(int x, int y) &#123; return 1ll * x * y % mod; &#125;</span><br><span class="line">&#x2F;&#x2F;ruogu_alter</span><br><span class="line">const int N &#x3D; 1005;</span><br><span class="line">char s[N];</span><br><span class="line">int n;</span><br><span class="line">int g[N][N &lt;&lt; 1][2][2], f[N][N &lt;&lt; 1][2][2];</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">int main() &#123;</span><br><span class="line">  scanf(&quot;%s&quot;, s); n &#x3D; strlen(s);</span><br><span class="line">  rep(i, n) s[i] -&#x3D; &#39;0&#39;;</span><br><span class="line">  g[0][N][0][0] &#x3D; 1;</span><br><span class="line">  rep(i, n) for (int j &#x3D; -i; j &lt;&#x3D; i; j++) rep(x, 2) rep(y, 2) &#123;</span><br><span class="line">    if (g[i][j + N][x][y]) &#123;</span><br><span class="line">      rep(a, 2) rep(b, 2) &#123;</span><br><span class="line">        if (!x &amp;&amp; a &gt; s[i]) continue;</span><br><span class="line">        if (!y &amp;&amp; b &gt; s[i]) continue;</span><br><span class="line">        int tox &#x3D; (x || a &lt; s[i]), toy &#x3D; (y || b &lt; s[i]), toj &#x3D; j + a - b;</span><br><span class="line">        &#x2F;&#x2F;cout &lt;&lt; i &lt;&lt; &quot; &quot; &lt;&lt; j &lt;&lt; &quot; &quot; &lt;&lt; x &lt;&lt; &quot; &quot; &lt;&lt; y &lt;&lt; &quot; &quot; &lt;&lt; a &lt;&lt; &quot; &quot; &lt;&lt; b &lt;&lt; endl;</span><br><span class="line">        reduce(g[i + 1][toj + N][tox][toy] +&#x3D; g[i][j + N][x][y] - mod);</span><br><span class="line">        reduce(f[i + 1][toj + N][tox][toy] +&#x3D; f[i][j + N][x][y] - mod);</span><br><span class="line">        reduce(f[i + 1][toj + N][tox][toy] +&#x3D; mul(abs(toj), g[i][j + N][x][y]) - mod);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  int res &#x3D; 0;</span><br><span class="line">  rep(i, 2) rep(j, 2) reduce(res +&#x3D; f[n][N][i][j] - mod);</span><br><span class="line">  res &#x3D; mul(res, (mod + 1) &#x2F; 2);</span><br><span class="line">  cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<br/>
<h4 id="soj945-贪心构造"><a class="markdownIt-Anchor" href="#soj945-贪心构造"></a> soj945 贪心/构造</h4>
<p><a href="http://120.27.222.204:12243/problem/945" target="_blank" rel="noopener">http://120.27.222.204:12243/problem/945</a></p>
<p><a href="http://120.27.222.204:12243/uploads/std/2020-5-16.pdf" target="_blank" rel="noopener">http://120.27.222.204:12243/uploads/std/2020-5-16.pdf</a></p>
<p>看题解吧。</p>
<p>感觉自己还是不太会构造。。</p>
<p>代码可以辅助题解看吧（逃</p>
<p><a href="http://120.27.222.204:12243/submission/79525" target="_blank" rel="noopener">http://120.27.222.204:12243/submission/79525</a></p>
<br/>
<h4 id="abc168f-离散化bfs"><a class="markdownIt-Anchor" href="#abc168f-离散化bfs"></a> abc168f 离散化/BFS</h4>
<p><a href="https://atcoder.jp/contests/abc168/tasks/abc168_f" target="_blank" rel="noopener">https://atcoder.jp/contests/abc168/tasks/abc168_f</a></p>
<p>直接对坐标全部离散化，然后横坐标一小段和纵坐标一小段组合就是一个矩形了，可以对这个进行bfs。</p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">ruogu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://ruogu-alter.github.io/2020/05/17/%E6%9D%82%E9%A2%98-%E4%B8%89/">http://ruogu-alter.github.io/2020/05/17/%E6%9D%82%E9%A2%98-%E4%B8%89/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://ruogu-alter.github.io" target="_blank">ruogu's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%80%BB%E7%BB%93/">总结</a></div><div class="post_share"><div class="social-share" data-image="/img/saber.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/05/20/soj947/"><img class="prev_cover lazyload" data-src="/img/saber.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">soj947</div></div></a></div><div class="next-post pull_right"><a href="/2020/05/16/2018syc%EF%BC%88%E4%B8%80%EF%BC%89/"><img class="next_cover lazyload" data-src="/img/saber.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">2018syc（一）</div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="disqus_thread"></div><script>var disqus_config = function () {
  this.page.url = 'http://ruogu-alter.github.io/2020/05/17/%E6%9D%82%E9%A2%98-%E4%B8%89/';
  this.page.identifier = '2020/05/17/杂题-三/';
  this.page.title = '杂题（三）';
};
(function() { 
  var d = document, s = d.createElement('script');
  s.src = 'https://ruogu-alter.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script><script>function getDisqusCount() {
  var d = document, s = d.createElement('script');
  s.src = 'https://ruogu-alter.disqus.com/count.js';
  s.id = 'dsq-count-scr';
  (d.head || d.body).appendChild(s);
}

window.addEventListener('load', getDisqusCount, false);</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By ruogu</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">簡</a></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script>$(function () {
  $('span.katex-display').wrap('<div class="katex-wrap"></div>')
})</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>