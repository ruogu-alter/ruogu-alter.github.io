<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>杂题（一） | ruogu's blog</title><meta name="description" content="2020-04-01 ~ 2020-04-10"><meta name="keywords" content="总结"><meta name="author" content="ruogu"><meta name="copyright" content="ruogu"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/nephren.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="杂题（一）"><meta name="twitter:description" content="2020-04-01 ~ 2020-04-10"><meta name="twitter:image" content="http://ruogu-alter.github.io/img/saber.jpg"><meta property="og:type" content="article"><meta property="og:title" content="杂题（一）"><meta property="og:url" content="http://ruogu-alter.github.io/2020/04/01/%E6%9D%82%E9%A2%98-%E4%B8%80/"><meta property="og:site_name" content="ruogu's blog"><meta property="og:description" content="2020-04-01 ~ 2020-04-10"><meta property="og:image" content="http://ruogu-alter.github.io/img/saber.jpg"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://ruogu-alter.github.io/2020/04/01/%E6%9D%82%E9%A2%98-%E4%B8%80/"><link rel="prev" title="min25筛" href="http://ruogu-alter.github.io/2020/04/03/min25%E7%AD%9B/"><link rel="next" title="JOISC2020" href="http://ruogu-alter.github.io/2020/03/31/JOISC2020/"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/disqusjs@1.2/dist/disqusjs.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: true,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'true',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/meltryllis.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">文章</div><div class="length_num">20</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">标签</div><div class="length_num">15</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-4"><a class="toc-link" href="#ezoj566-乱搞数学"><span class="toc-number">1.</span> <span class="toc-text"> ezoj566 乱搞&#x2F;数学</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#agc043b-数学"><span class="toc-number">2.</span> <span class="toc-text"> agc043B 数学</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#ezoj572-数论"><span class="toc-number">3.</span> <span class="toc-text"> ezoj572 数论</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#soj905-动态规划"><span class="toc-number">4.</span> <span class="toc-text"> soj905 动态规划</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#soj906-计算几何动态规划"><span class="toc-number">5.</span> <span class="toc-text"> soj906 计算几何&#x2F;动态规划</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#agc043d-组合计数动态规划"><span class="toc-number">6.</span> <span class="toc-text"> agc043d 组合计数&#x2F;动态规划</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#agc043c-sg函数贪心"><span class="toc-number">7.</span> <span class="toc-text"> agc043c sg函数&#x2F;贪心</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zroi1272sdwc2019-数论复刻"><span class="toc-number">8.</span> <span class="toc-text"> zroi1272&#x2F;sdwc2019 数论&#x2F;复刻</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zroi1270-动态规划复刻"><span class="toc-number">9.</span> <span class="toc-text"> zroi1270 动态规划&#x2F;复刻</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#soj908-矩阵快速幂组合动态规划"><span class="toc-number">10.</span> <span class="toc-text"> soj908 矩阵快速幂&#x2F;组合&#x2F;动态规划</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cf1329c-贪心"><span class="toc-number">11.</span> <span class="toc-text"> cf1329C 贪心</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cf1329a-贪心"><span class="toc-number">12.</span> <span class="toc-text"> cf1329A 贪心</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#uoj513-线性基结论"><span class="toc-number">13.</span> <span class="toc-text"> uoj513 线性基&#x2F;结论</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#soj911-状压dp"><span class="toc-number">14.</span> <span class="toc-text"> soj911 状压dp</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#uoj515-线段树"><span class="toc-number">15.</span> <span class="toc-text"> uoj515  线段树</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#uoj66-结论数学"><span class="toc-number">16.</span> <span class="toc-text"> uoj66 结论&#x2F;数学</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#soj920loj6213-结论斜率优化"><span class="toc-number">17.</span> <span class="toc-text"> soj920&#x2F;loj6213 结论&#x2F;斜率优化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#soj921loj3285"><span class="toc-number">18.</span> <span class="toc-text"> soj921&#x2F;loj3285</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#soj922-数论杜教筛容斥原理"><span class="toc-number">19.</span> <span class="toc-text"> soj922 数论&#x2F;杜教筛&#x2F;容斥原理</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#uoj514-生成函数容斥计数"><span class="toc-number">20.</span> <span class="toc-text"> uoj514 生成函数&#x2F;容斥&#x2F;计数</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#soj84-高斯消元异或方程组"><span class="toc-number">21.</span> <span class="toc-text"> soj84 高斯消元&#x2F;异或方程组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cf1333f-模拟"><span class="toc-number">22.</span> <span class="toc-text"> cf1333F 模拟</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cf1333e-构造"><span class="toc-number">23.</span> <span class="toc-text"> cf1333E 构造</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#cf1333c-two-pointers"><span class="toc-number">24.</span> <span class="toc-text"> cf1333C two pointers</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(/img/saber.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">ruogu's blog</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">杂题（一）</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="发表于 2020-04-01 21:49:16"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2020-04-01</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="更新于 2020-04-09 22:31:06"><i class="fa fa-history" aria-hidden="true"></i> 更新于 2020-04-09</span></time></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-comment-o" aria-hidden="true"></i><span>评论数:</span><span class="disqus-comment-count comment-count"><a href="http://ruogu-alter.github.io/2020/04/01/%E6%9D%82%E9%A2%98-%E4%B8%80/#disqus_thread"></a></span></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div id="article-container"><h4 id="ezoj566-乱搞数学"><a class="markdownIt-Anchor" href="#ezoj566-乱搞数学"></a> ezoj566 乱搞/数学</h4>
<p><a href="http://ezoj.org.cn/contest/41/problem/566" target="_blank" rel="noopener">http://ezoj.org.cn/contest/41/problem/566</a></p>
<p>这题给我提了个醒, 就是程序本身占的内存空间挺大的, bits头文件占的超过了<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn><mi>M</mi><mi>B</mi></mrow><annotation encoding="application/x-tex">2MB</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord mathdefault" style="margin-right:0.10903em;">M</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>.</p>
<p>设出现<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>次的是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>, 出现<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>次的是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>, 用所给的很容易能求出 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>−</mo><mi>B</mi><mo separator="true">,</mo><mi>A</mi><mo>⊕</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">A-B,A \oplus B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8777699999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>. 大抵发现还能求出模意义下的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mfrac><mi>A</mi><mi>B</mi></mfrac></mrow><annotation encoding="application/x-tex">\frac{A}{B}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.217331em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.872331em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.05017em;">B</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> …然后就能乱搞过了。</p>
<p>其实确定的解法是求出<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>A</mi><mn>2</mn></msup><mo>−</mo><msup><mi>B</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">A^2-B^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">A</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>, 也很容易.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;cstdio&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair &lt;int, int&gt;</span><br><span class="line">#define iiii pair &lt;int, pii &gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define MOD 1000000007</span><br><span class="line">#define rep(i, x) for(int (i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">  int x &#x3D; 0, p &#x3D; 1; char c &#x3D; getchar();	</span><br><span class="line">  while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">  if (c &#x3D;&#x3D; 45) p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">  while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">  return x * p;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">&#x2F;&#x2F;ruogu_alter</span><br><span class="line">int n;</span><br><span class="line">const int mod &#x3D; 998244353;</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">int mul(int x, int y) &#123; return 1ll * x * y % mod; &#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">  n &#x3D; getint();</span><br><span class="line">  ll sum0 &#x3D; 0, sum1 &#x3D; 0;</span><br><span class="line">  int hh0 &#x3D; 0, hh1 &#x3D; 0;</span><br><span class="line">  int res &#x3D; 1, hh &#x3D; 1;</span><br><span class="line">  rep(i, n) &#123;</span><br><span class="line">    int x &#x3D; getint() - 1;</span><br><span class="line">    sum0 +&#x3D; x;</span><br><span class="line">    sum1 +&#x3D; i;</span><br><span class="line">    hh0 ^&#x3D; x;</span><br><span class="line">    hh1 ^&#x3D; i;</span><br><span class="line">    res &#x3D; mul(res, x + 1);</span><br><span class="line">    hh &#x3D; mul(hh, i + 1);</span><br><span class="line">  &#125;</span><br><span class="line">  sum0 -&#x3D; sum1;</span><br><span class="line">  hh0 ^&#x3D; hh1;</span><br><span class="line">  for (int i &#x3D; 0; i &lt; n; i++) if (i - (i ^ hh0) &#x3D;&#x3D; sum0 &amp;&amp; mul(hh, i + 1) &#x3D;&#x3D; mul(res, (i ^ hh0) + 1)) &#123;</span><br><span class="line">    printf(&quot;%d\n&quot;, i + 1);</span><br><span class="line">    return 0;</span><br><span class="line">  &#125;</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="agc043b-数学"><a class="markdownIt-Anchor" href="#agc043b-数学"></a> agc043B 数学</h4>
<p><a href="https://atcoder.jp/contests/agc043/tasks/agc043_b" target="_blank" rel="noopener">https://atcoder.jp/contests/agc043/tasks/agc043_b</a></p>
<p>我会判<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,但是竟然不太会判<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>…(至少短时间内没想出来).</p>
<p>先做一次操作把<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><mo separator="true">,</mo><mn>2</mn><mo separator="true">,</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">1,2,3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span></span></span></span>变成<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo separator="true">,</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">0,1,2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">2</span></span></span></span>.那么奇偶性很好判,直接组合数就行.</p>
<p>然后发现如果序列中有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,那么答案一定不是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>…因为一段<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>两端的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>很难被消去.</p>
<p>如果序列中没有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,可以把所有数除以<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>,答案也会除以<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>.</p>
<h4 id="ezoj572-数论"><a class="markdownIt-Anchor" href="#ezoj572-数论"></a> ezoj572 数论</h4>
<p><a href="https://ezoj.org.cn/contest/41/problem/572" target="_blank" rel="noopener">https://ezoj.org.cn/contest/41/problem/572</a></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>42</mn></mrow><annotation encoding="application/x-tex">42</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">2</span></span></span></span>pts: 发现答案是容斥… 是莫比乌斯函数…</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>95</mn></mrow><annotation encoding="application/x-tex">95</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord">5</span></span></span></span>pts: 直接不推柿子的得到 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>a</mi><mi>n</mi><msub><mi>s</mi><mi>n</mi></msub><mo>=</mo><mfrac><mrow><mn>2</mn><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></msubsup><msub><mi>ϕ</mi><mi>i</mi></msub><mo>−</mo><mn>1</mn></mrow><msup><mi>n</mi><mn>2</mn></msup></mfrac></mrow><annotation encoding="application/x-tex">ans_n = \frac{2 \sum \limits_{i=1}^n \phi_i-1}{n^2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord mathdefault">a</span><span class="mord mathdefault">n</span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:2.356447em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.011447em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.7463142857142857em;"><span style="top:-2.786em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-4.0310635em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mop op-limits mtight"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.4005478571428571em;"><span style="top:-1.8629092857142857em;margin-left:0em;"><span class="pstrut" style="height:2.75em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-2.7500050000000003em;"><span class="pstrut" style="height:2.75em;"></span><span><span class="mop op-symbol small-op mtight">∑</span></span></span><span style="top:-3.700005em;margin-left:0em;"><span class="pstrut" style="height:2.75em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.0300907142857143em;"><span></span></span></span></span></span><span class="mspace mtight" style="margin-right:0.19516666666666668em;"></span><span class="mord mtight"><span class="mord mathdefault mtight">ϕ</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3280857142857143em;"><span style="top:-2.357em;margin-left:0em;margin-right:0.07142857142857144em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span> .当然, 直接利用莫比乌斯函数以及性质(积性卷积性还是积性)也能做, 就可以杜教筛了.</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>100</mn></mrow><annotation encoding="application/x-tex">100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span>pts:</p>
<p><img src="/" class="lazyload" data-src="ezoj572.png"  alt="ezoj572" /></p>
<p>???</p>
<h4 id="soj905-动态规划"><a class="markdownIt-Anchor" href="#soj905-动态规划"></a> soj905 动态规划</h4>
<p><a href="http://120.27.222.204:12243/problem/905" target="_blank" rel="noopener">http://120.27.222.204:12243/problem/905</a></p>
<p>我tmd一开始把韦恩图想错了… 然后比赛就崩了。限制<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>的集合<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>, 限制<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>的集合<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>, 并不满足 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mo>∨</mo><mi>B</mi><mo>=</mo><mi>A</mi><mi>L</mi><mi>L</mi></mrow><annotation encoding="application/x-tex">A \lor B = ALL</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∨</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault">L</span><span class="mord mathdefault">L</span></span></span></span>.</p>
<p>但是直接抛开容斥，再想一个性质: 知道<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi></mrow><annotation encoding="application/x-tex">y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>, 知道<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>∧</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \land y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>, 知道<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>∨</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \lor y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∨</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>不就知道了嘛.也就是说算出<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>∧</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \land y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>的方案乘上<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>∨</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \lor y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∨</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>的方案就结束了.</p>
<p>算<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>∧</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x \land y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.55556em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∧</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>满足条件的方案就令<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>f</mi><mrow><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo separator="true">,</mo><mi>x</mi></mrow></msub></mrow><annotation encoding="application/x-tex">f_{l,r,x}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3361079999999999em;"><span style="top:-2.5500000000000003em;margin-left:-0.10764em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.01968em;">l</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.02778em;">r</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>表示从高往低第<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>位区间<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">[</mo><mi>l</mi><mo separator="true">,</mo><mi>r</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[l,r]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mclose">]</span></span></span></span>还没分出胜负, 另一个同理. 这是我考场上就已经写好了的…</p>
<p>awsl</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair &lt;int, int&gt;</span><br><span class="line">#define iiii pair &lt;int, pii &gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define MOD 1000000007</span><br><span class="line">#define rep(i, x) for(int (i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">  int x &#x3D; 0, p &#x3D; 1; char c &#x3D; getchar();	</span><br><span class="line">  while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">  if (c &#x3D;&#x3D; 45) p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">  while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">  return x * p;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">&#x2F;&#x2F;ruogu_alter</span><br><span class="line">const int mod &#x3D; MOD;</span><br><span class="line">const int N &#x3D; 15;</span><br><span class="line">const int M &#x3D; 35;</span><br><span class="line">int n, m, f[N][N][M], a[N];</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">inline void reduce(int &amp;x) &#123; x +&#x3D; x &gt;&gt; 31 &amp; mod; &#125;</span><br><span class="line">inline int mul(int x, int y) &#123; return 1ll * x * y % mod; &#125;</span><br><span class="line">int g0(int l, int r, int x) &#123;</span><br><span class="line">  if (x &lt; 0 || l &gt; r) return 1;</span><br><span class="line">  if (f[l][r][x] &gt;&#x3D; 0) return f[l][r][x];</span><br><span class="line">  int res &#x3D; 0, p &#x3D; r + 1;</span><br><span class="line">  while (p &gt; l &amp;&amp; (a[p - 1] &gt;&gt; x &amp; 1)) --p;</span><br><span class="line">  for (int i &#x3D; p; i &lt;&#x3D; r + 1; i++) &#123;</span><br><span class="line">    int ansl &#x3D; g0(l, i - 1, x - 1);</span><br><span class="line">    int ansr &#x3D; g0(i, r, x - 1);</span><br><span class="line">    reduce(res +&#x3D; mul(ansl, ansr) - mod);</span><br><span class="line">  &#125;</span><br><span class="line">  return f[l][r][x] &#x3D; res;</span><br><span class="line">&#125;</span><br><span class="line">int g1(int l, int r, int x) &#123;</span><br><span class="line">  if (x &lt; 0 || l &gt; r) return 1;</span><br><span class="line">  if (f[l][r][x] &gt;&#x3D; 0) return f[l][r][x]; </span><br><span class="line">  int res &#x3D; 0, p &#x3D; r + 1;</span><br><span class="line">  while (p &gt; l &amp;&amp; !(a[p - 1] &gt;&gt; x &amp; 1)) --p;</span><br><span class="line">  for (int i &#x3D; p; i &lt;&#x3D; r + 1; i++) &#123;</span><br><span class="line">    int ansl &#x3D; g1(l, i - 1, x - 1);</span><br><span class="line">    int ansr &#x3D; g1(i, r, x - 1);</span><br><span class="line">    reduce(res +&#x3D; mul(ansl, ansr) - mod);</span><br><span class="line">  &#125;</span><br><span class="line">  return f[l][r][x] &#x3D; res;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">int main() &#123;</span><br><span class="line">  n &#x3D; getint(); m &#x3D; getint(); int res &#x3D; 1;</span><br><span class="line">  rep(i, n) a[i] &#x3D; getint();</span><br><span class="line">  memset(f, -1, sizeof(f)); res &#x3D; mul(res, g0(0, n - 1, m - 1));</span><br><span class="line">  &#x2F;&#x2F;rep(i, n) a[i] &#x3D; ~a[i] &amp; (~(-1 &lt;&lt; m));</span><br><span class="line">  memset(f, -1, sizeof(f)); res &#x3D; mul(res, g1(0, n - 1, m - 1));</span><br><span class="line">  cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="soj906-计算几何动态规划"><a class="markdownIt-Anchor" href="#soj906-计算几何动态规划"></a> soj906 计算几何/动态规划</h4>
<p><a href="http://120.27.222.204:12243/problem/906" target="_blank" rel="noopener">http://120.27.222.204:12243/problem/906</a></p>
<p>我场上写了模拟退火, 得了<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>20</mn></mrow><annotation encoding="application/x-tex">20</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">0</span></span></span></span>…</p>
<p>其实在我印象里, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>=</mo><mn>50</mn></mrow><annotation encoding="application/x-tex">n=50</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">0</span></span></span></span>是很可以退的, 但是这题不太行. 这题等价于有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>50</mn></mrow><annotation encoding="application/x-tex">50</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">0</span></span></span></span>次询问, 而且条件苛刻, 必须要恰好形成凸包才行.</p>
<p>可以先预处理每个三角形内的点的权值. 把所有点极角排序, 令<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><msub><mi>p</mi><mrow><mi>s</mi><mo separator="true">,</mo><mi>i</mi><mo separator="true">,</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow></msub></mrow><annotation encoding="application/x-tex">dp_{s,i,x,y}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.980548em;vertical-align:-0.286108em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">s</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight">x</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.03588em;">y</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span></span></span></span>表示起点为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">s</span></span></span></span>, 已经有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>个点, 最后两个点是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">x,y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>的最小权值. 这样的话, 每次都要增加<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mo separator="true">,</mo><mi>x</mi><mo separator="true">,</mo><mi>y</mi></mrow><annotation encoding="application/x-tex">s,x,y</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">s</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">x</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span></span></span></span>三个点形成的三角形内的权值. 复杂度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mi>n</mi><mn>5</mn></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n^5)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">n</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>但是常数相当小, 可以过.</p>
<p>另外, 这是我又一次不会写凸包…</p>
<h4 id="agc043d-组合计数动态规划"><a class="markdownIt-Anchor" href="#agc043d-组合计数动态规划"></a> agc043d 组合计数/动态规划</h4>
<p><a href="https://atcoder.jp/contests/agc043/tasks/agc043_d" target="_blank" rel="noopener">https://atcoder.jp/contests/agc043/tasks/agc043_d</a></p>
<p>这题我已经想清楚问题的本质了, 但是完全不会dp…</p>
<p><img src="/" class="lazyload" data-src="agc043d.png"  alt="agc043d" /></p>
<p>这是sundz的博客, 前面我都想清楚了, 就是不会<strong>直接dp</strong>…</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair &lt;int, int&gt;</span><br><span class="line">#define iiii pair &lt;int, pii &gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define MOD 1000000007</span><br><span class="line">#define rep(i, x) for(int (i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">  int x &#x3D; 0, p &#x3D; 1; char c &#x3D; getchar();	</span><br><span class="line">  while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">  if (c &#x3D;&#x3D; 45) p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">  while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">  return x * p;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">&#x2F;&#x2F;ruogu_alter</span><br><span class="line">const int B &#x3D; 6005;</span><br><span class="line">int n, mod, f[B][B &lt;&lt; 1];</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">void reduce(int &amp;x) &#123; x +&#x3D; x &gt;&gt; 31 &amp; mod; &#125;</span><br><span class="line">int mul(int x, int y) &#123; return 1ll * x * y % mod; &#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">  n &#x3D; getint(); mod &#x3D; getint();</span><br><span class="line">  f[3 * n][B] &#x3D; 1;</span><br><span class="line">  for (int i &#x3D; 3 * n; i &gt; 0; i--) &#123;</span><br><span class="line">    rep(j, B &lt;&lt; 1) if (f[i][j]) &#123;</span><br><span class="line">      reduce(f[i - 1][j + 1] +&#x3D; f[i][j] - mod);</span><br><span class="line">      if (i &gt;&#x3D; 2 &amp;&amp; j &gt;&#x3D; 1) reduce(f[i - 2][j - 1] +&#x3D; mul(f[i][j], i - 1) - mod);</span><br><span class="line">      if (i &gt;&#x3D; 3) &#123;</span><br><span class="line">        reduce(f[i - 3][j] +&#x3D; mul(f[i][j], (i - 1) * (i - 2)) - mod);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  int res &#x3D; 0;</span><br><span class="line">  for (int i &#x3D; B; i &lt; (B &lt;&lt; 1); i++) &#123;</span><br><span class="line">    reduce(res +&#x3D; f[0][i] - mod);</span><br><span class="line">  &#125;</span><br><span class="line">  cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从大往小考虑一个计数器<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>n</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">cnt</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span></span></span></span>, 如果是一个大小为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>的组就不动, 如果是一个大小为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>的组就<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>n</mi><mi>t</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">cnt-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69841em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>, 如果是一个大小为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>的计数器就<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>n</mi><mi>t</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">cnt+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69841em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>. 这时, 如果把大小为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>的组的生成看做括号匹配, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>c</mi><mi>n</mi><mi>t</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">cnt+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69841em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">c</span><span class="mord mathdefault">n</span><span class="mord mathdefault">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>有两种意思, 一种是表示单独成一组, 一种是表示匹配一个之前已经生成的变成长度为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>的. 这题也要注意, 在生成的时候就要把后面选择的方案数乘上, 这已经比较经典了(为啥我还不会…).</p>
<h4 id="agc043c-sg函数贪心"><a class="markdownIt-Anchor" href="#agc043c-sg函数贪心"></a> agc043c sg函数/贪心</h4>
<p><a href="https://atcoder.jp/contests/agc043/tasks/agc043_c" target="_blank" rel="noopener">https://atcoder.jp/contests/agc043/tasks/agc043_c</a></p>
<p><img src="/" class="lazyload" data-src="agc043c.png"  alt="agc043c" /></p>
<p>(from xht37 <a href="https://www.luogu.com.cn/blog/xht37/solution-at5800" target="_blank" rel="noopener">https://www.luogu.com.cn/blog/xht37/solution-at5800</a>)</p>
<p>这实在太妙了, 完全想不到!</p>
<p>列几个注意点吧:</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1.</mn></mrow><annotation encoding="application/x-tex">1.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span></span></span></span>首先发现<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn><msup><mn>0</mn><mn>18</mn></msup></mrow><annotation encoding="application/x-tex">10^{18}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord"><span class="mord">0</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mord mtight">8</span></span></span></span></span></span></span></span></span></span></span></span>非常大,便必须想到贪心的选.</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2.</mn></mrow><annotation encoding="application/x-tex">2.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">.</span></span></span></span>这种在图上贪心可以先转化成单向边然后<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">sg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span>函数.</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3.</mn></mrow><annotation encoding="application/x-tex">3.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">.</span></span></span></span>这种DAG博弈转移图, <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>S</mi><mi>G</mi></mrow><annotation encoding="application/x-tex">SG</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord mathdefault">G</span></span></span></span>函数上界<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msqrt><mi>m</mi></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\sqrt{m})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.05028em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8002800000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault">m</span></span></span><span style="top:-2.76028em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,
-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,
-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,
35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,
-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467
s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422
s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.23972em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span>.</p>
<p>证明(by sundz): 归纳! 如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">sg</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span>为多少, 图上至少有多少边这样.</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4.</mn></mrow><annotation encoding="application/x-tex">4.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">.</span></span></span></span>即使没有这个上界, 也可以通过<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>f</mi><mi>w</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">fwt</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mord mathdefault" style="margin-right:0.02691em;">w</span><span class="mord mathdefault">t</span></span></span></span>权值来求得答案.</p>
<h4 id="zroi1272sdwc2019-数论复刻"><a class="markdownIt-Anchor" href="#zroi1272sdwc2019-数论复刻"></a> zroi1272/sdwc2019 数论/复刻</h4>
<p><a href="http://zhengruioi.com/problem/1272" target="_blank" rel="noopener">http://zhengruioi.com/problem/1272</a></p>
<p><img src="/" class="lazyload" data-src="zroi1272.jpg"  alt="zroi1272" /></p>
<p>果然我的数论不很好, 做过一遍都不太会了.</p>
<p>其主要宗旨是希望把<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi></mrow><annotation encoding="application/x-tex">gcd</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">c</span><span class="mord mathdefault">d</span></span></span></span>的柿子转化成斐波那契数对一个数取模.</p>
<h4 id="zroi1270-动态规划复刻"><a class="markdownIt-Anchor" href="#zroi1270-动态规划复刻"></a> zroi1270 动态规划/复刻</h4>
<p><a href="http://zhengruioi.com/problem/1270" target="_blank" rel="noopener">http://zhengruioi.com/problem/1270</a></p>
<p>要记录一个结论, 合并的时候只关注根节点在点分树的深度.</p>
<p><a href="http://zhengruioi.com/download.php?type=tutorial&amp;id=1270" target="_blank" rel="noopener">http://zhengruioi.com/download.php?type=tutorial&amp;id=1270</a>具体可以看题解.</p>
<h4 id="soj908-矩阵快速幂组合动态规划"><a class="markdownIt-Anchor" href="#soj908-矩阵快速幂组合动态规划"></a> soj908 矩阵快速幂/组合/动态规划</h4>
<p><a href="http://120.27.222.204:12243/problem/908" target="_blank" rel="noopener">http://120.27.222.204:12243/problem/908</a></p>
<p>这题有个很easy的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>90</mn></mrow><annotation encoding="application/x-tex">90</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord">0</span></span></span></span>分暴力: 维护状态<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>a</mi><mi>s</mi><mi>k</mi></mrow><annotation encoding="application/x-tex">mask</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span></span>, 其中第<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>位表示第<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>个数是否已经小于了第<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">i+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.74285em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">i</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>个数. 这样复杂度是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msup><mn>2</mn><mrow><mn>3</mn><mi>n</mi></mrow></msup><mi mathvariant="normal">∣</mi><mi>S</mi><mi mathvariant="normal">∣</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(2^{3n}|S|)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">3</span><span class="mord mathdefault mtight">n</span></span></span></span></span></span></span></span></span><span class="mord">∣</span><span class="mord mathdefault" style="margin-right:0.05764em;">S</span><span class="mord">∣</span><span class="mclose">)</span></span></span></span>的.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair &lt;int, int&gt;</span><br><span class="line">#define iiii pair &lt;int, pii &gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define rep(i, x) for(int (i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">  int x &#x3D; 0, p &#x3D; 1; char c &#x3D; getchar();	</span><br><span class="line">  while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">  if (c &#x3D;&#x3D; 45) p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">  while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">  return x * p;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">const int mod &#x3D; 1e9 + 7;</span><br><span class="line">inline void reduce(int &amp;x) &#123; x +&#x3D; x &gt;&gt; 31 &amp; mod; &#125;</span><br><span class="line">inline int mul(int x, int y) &#123; return 1ll * x * y % mod; &#125;</span><br><span class="line">&#x2F;&#x2F;ruogu_alter</span><br><span class="line">const int N &#x3D; 10005;</span><br><span class="line">const int M &#x3D; (1 &lt;&lt; 7) + 5;</span><br><span class="line">int n, k, m, len;</span><br><span class="line">char s[N];</span><br><span class="line">struct matrix &#123;</span><br><span class="line">  int d[M][M];</span><br><span class="line">  matrix() &#123; memset(d, 0, sizeof(d)); &#125;</span><br><span class="line">  inline matrix operator *(matrix &amp;b) &#123;</span><br><span class="line">    matrix ans;</span><br><span class="line">    rep(i, m) rep(j, m) if (d[i][j]) &#123;</span><br><span class="line">      rep(k, m) &#123;</span><br><span class="line">        reduce(ans.d[i][k] +&#x3D; mul(d[i][j], b.d[j][k]) - mod);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return ans;</span><br><span class="line">  &#125;</span><br><span class="line">  void p() &#123;</span><br><span class="line">    rep(i, m) &#123;</span><br><span class="line">      rep(j, m) cout &lt;&lt; d[i][j] &lt;&lt; &quot; &quot;;</span><br><span class="line">      cout &lt;&lt; endl;</span><br><span class="line">    &#125;</span><br><span class="line">    cout &lt;&lt; endl;</span><br><span class="line">  &#125;</span><br><span class="line">&#125; a, res;</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">namespace INIT &#123;</span><br><span class="line">int f[2][M], g[M][M][2];</span><br><span class="line">inline int calc(int msk0, int msk1, int x) &#123;</span><br><span class="line">  if (g[msk0][msk1][x] !&#x3D; -1) return g[msk0][msk1][x];</span><br><span class="line">  if (__builtin_popcount(msk1) &amp; 1) return g[msk0][msk1][x] &#x3D; -2;</span><br><span class="line">  msk1 |&#x3D; (x &lt;&lt; n); int ans &#x3D; msk0; </span><br><span class="line">  rep(i, n) if (!(msk0 &gt;&gt; i &amp; 1) &amp;&amp; (msk1 &gt;&gt; i &amp; 1) &gt; (msk1 &gt;&gt; (i + 1) &amp; 1)) &#123;</span><br><span class="line">     return g[msk0][msk1 ^ (x &lt;&lt; n)][x] &#x3D; -2;</span><br><span class="line">  &#125;</span><br><span class="line">  rep(i, n) if (!(msk0 &gt;&gt; i &amp; 1) &amp;&amp; (msk1 &gt;&gt; i &amp; 1) &lt; (msk1 &gt;&gt; (i + 1) &amp; 1)) &#123;</span><br><span class="line">    ans |&#x3D; (1 &lt;&lt; i);</span><br><span class="line">  &#125;</span><br><span class="line">  return g[msk0][msk1 ^ (x &lt;&lt; n)][x] &#x3D; ans;</span><br><span class="line">&#125;</span><br><span class="line">void solve() &#123;</span><br><span class="line">  memset(g, -1, sizeof(g));</span><br><span class="line">  rep(ss, m) &#123;</span><br><span class="line">    memset(f, 0, sizeof(f));</span><br><span class="line">    f[0][ss] &#x3D; 1; </span><br><span class="line">    rep(i, len) rep(j, m) if (f[i &amp; 1][j]) &#123;</span><br><span class="line">      int val &#x3D; f[i &amp; 1][j]; f[i &amp; 1][j] &#x3D; 0;</span><br><span class="line">      rep(k, m) &#123;</span><br><span class="line">        int t &#x3D; calc(j, k, s[i] - &#39;0&#39;);</span><br><span class="line">        &#x2F;&#x2F;cout &lt;&lt; j &lt;&lt; &quot; &quot; &lt;&lt; k &lt;&lt; &quot; &quot; &lt;&lt; s[i] - &#39;0&#39; &lt;&lt; &quot; &quot; &lt;&lt; t &lt;&lt; endl;</span><br><span class="line">        if (t &gt;&#x3D; 0) reduce(f[(i &amp; 1) ^ 1][t] +&#x3D; val - mod);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    rep(i, m) a.d[ss][i] &#x3D; f[len &amp; 1][i];</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">  n &#x3D; getint(); k &#x3D; getint(); m &#x3D; (1 &lt;&lt; n);</span><br><span class="line">  scanf(&quot;%s&quot;, s); len &#x3D; strlen(s);</span><br><span class="line">  INIT :: solve(); </span><br><span class="line">  rep(i, m) res.d[i][i] &#x3D; 1;</span><br><span class="line">  while (k) &#123;</span><br><span class="line">    if (k &amp; 1) res &#x3D; res * a;</span><br><span class="line">    a &#x3D; a * a;</span><br><span class="line">    k &gt;&gt;&#x3D; 1;</span><br><span class="line">  &#125;</span><br><span class="line">  cout &lt;&lt; res.d[0][m - 1] &lt;&lt; endl;</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后赛后发现有人跟我写了类似的竟然过了… 把矩乘写成下面这样!</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">zz cf(zz x,zz y)&#123;</span><br><span class="line">	zz z;</span><br><span class="line">	memset(z.a,0,sizeof z.a);</span><br><span class="line">	for (int i&#x3D;0;i&lt;v;i++)</span><br><span class="line">		for (int k&#x3D;0;k&lt;v;k++)</span><br><span class="line">			if (x.a[i][k])</span><br><span class="line">				for (int j&#x3D;0;j&lt;v;j+&#x3D;8)&#123;</span><br><span class="line">					z.a[i][j]+&#x3D;x.a[i][k]*y.a[k][j];</span><br><span class="line">					z.a[i][j+1]+&#x3D;x.a[i][k]*y.a[k][j+1];</span><br><span class="line">					z.a[i][j+2]+&#x3D;x.a[i][k]*y.a[k][j+2];</span><br><span class="line">					z.a[i][j+3]+&#x3D;x.a[i][k]*y.a[k][j+3];</span><br><span class="line">					z.a[i][j+4]+&#x3D;x.a[i][k]*y.a[k][j+4];</span><br><span class="line">					z.a[i][j+5]+&#x3D;x.a[i][k]*y.a[k][j+5];</span><br><span class="line">					z.a[i][j+6]+&#x3D;x.a[i][k]*y.a[k][j+6];</span><br><span class="line">					z.a[i][j+7]+&#x3D;x.a[i][k]*y.a[k][j+7];</span><br><span class="line">				&#125;</span><br><span class="line">	for (int i&#x3D;0;i&lt;v;i++)</span><br><span class="line">		for (int j&#x3D;0;j&lt;v;j++)z.a[i][j]%&#x3D;M;</span><br><span class="line">	return z;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>sundz教我的真正的做法:</p>
<h4 id="cf1329c-贪心"><a class="markdownIt-Anchor" href="#cf1329c-贪心"></a> cf1329C 贪心</h4>
<p><a href="http://codeforces.com/contest/1329/problem/C" target="_blank" rel="noopener">http://codeforces.com/contest/1329/problem/C</a></p>
<p>有一个很显然的想法，就是尽量删根，然后递归子树。这个想法是对的。</p>
<p>首先这样删一定删的是最大的，比删子树里的任意一个优。</p>
<p>那是否会先删子树内的，再删根呢？不可能。我们将这个树贪心的维护成若干条链，表示我删了这个点，儿子哪个点继承上来。若不能删除根，显然从这个点所在的链的最深处深度为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi></mrow><annotation encoding="application/x-tex">g</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span>。这条链在以后的任何操作中都不会再改变形态了，所以这个根永远也删不了了。</p>
<be/>
<p>我在考场上的想法就是强行维护链并把链头扔进pq里。只不过每删一个点，都可能扔进去<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>l</mi><mi>o</mi><mi>g</mi></mrow><annotation encoding="application/x-tex">log</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span></span></span></span>个点，复杂度就是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><msup><mi>g</mi><mn>2</mn></msup><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlog^2n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord mathdefault">n</span><span class="mclose">)</span></span></span></span>，错了。</p>
<h4 id="cf1329a-贪心"><a class="markdownIt-Anchor" href="#cf1329a-贪心"></a> cf1329A 贪心</h4>
<p><a href="http://codeforces.com/contest/1329/problem/A" target="_blank" rel="noopener">http://codeforces.com/contest/1329/problem/A</a></p>
<p>好难受。。做的最差的一次<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>。我交的第一发读错题了，以为可以按任意顺序放入。后面的wa体现了自己水平之弱。</p>
<p>先来说说我考试的时候的想法。首先一个想法是所有的线段按顺序从左往右分配，而且左端点单调递增。维护一个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>o</mi><mi>s</mi></mrow><annotation encoding="application/x-tex">pos</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span></span></span></span>表示上一条线段的左端点，维护一个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>r</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">pre</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span></span></span></span>表示前缀最大右端点。考虑我这条线段的右端点至少超过<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>r</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">pre</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span></span></span></span>多少，并且我这条线段的左端点至少是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>o</mi><mi>s</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">pos+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7777700000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault">o</span><span class="mord mathdefault">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>。这样可以固定一个最左的左端点。</p>
<p>我列一下我这题犯过的错误（按发现顺序）：</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1.</mn></mrow><annotation encoding="application/x-tex">1.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span></span></span></span><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo separator="true">,</mo><mi>m</mi></mrow><annotation encoding="application/x-tex">n,m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">n</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">m</span></span></span></span>搞混了。</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2.</mn></mrow><annotation encoding="application/x-tex">2.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">.</span></span></span></span>读错题，以为可以按任意顺序放，还把长度<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>s</mi><mi>o</mi><mi>r</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">sort</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">o</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">t</span></span></span></span>了一下。</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3.</mn></mrow><annotation encoding="application/x-tex">3.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">.</span></span></span></span>忘记判右端点超过<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>了。</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>4.</mn></mrow><annotation encoding="application/x-tex">4.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">4</span><span class="mord">.</span></span></span></span>令右端点超过<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>r</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">pre</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span></span></span></span>至少多少的数值为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>。如果<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">x=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>，其实右端点可以比<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>r</mi><mi>e</mi></mrow><annotation encoding="application/x-tex">pre</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span></span></span></span>小，我忘记判了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair &lt;int, int&gt;</span><br><span class="line">#define iiii pair &lt;int, pii &gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define MOD 1000000007</span><br><span class="line">#define rep(i, x) for(int (i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">  int x &#x3D; 0, p &#x3D; 1; char c &#x3D; getchar();	</span><br><span class="line">  while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">  if (c &#x3D;&#x3D; 45) p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">  while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">  return x * p;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">&#x2F;&#x2F;ruogu_alter</span><br><span class="line">const int N &#x3D; 1e5 + 5;</span><br><span class="line">int n, m, res[N];</span><br><span class="line">ll suf[N];</span><br><span class="line">pii a[N];</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">int main() &#123;</span><br><span class="line">  n &#x3D; getint(); m &#x3D; getint();</span><br><span class="line">  rep(i, m) a[i] &#x3D; mp(getint(), i);</span><br><span class="line">  for (int i &#x3D; m - 1; i &gt;&#x3D; 0; i--) suf[i] &#x3D; suf[i + 1] + a[i].first;</span><br><span class="line">  int now &#x3D; -1, pre &#x3D; -1;</span><br><span class="line">  memset(res, -1, sizeof(res));</span><br><span class="line">  rep(i, m) &#123;</span><br><span class="line">    if (suf[i] &lt; n - now - 1) return !printf(&quot;%d\n&quot;, -1);</span><br><span class="line">    if (m - i &gt; n - pre - 1) return !printf(&quot;%d\n&quot;, -1);</span><br><span class="line">    ll x &#x3D; max(1ll * n - now - 1 - suf[i + 1], 0ll);</span><br><span class="line">    assert(x &lt;&#x3D; a[i].first);     </span><br><span class="line">    int p &#x3D; max(1ll * pre + 1, 1ll * now + x - a[i].first + 1);</span><br><span class="line">    if (!x) p &#x3D; pre + 1;</span><br><span class="line">    if (p + a[i].first - 1 &gt;&#x3D; n) return !printf(&quot;%d\n&quot;, -1);</span><br><span class="line">    res[a[i].second] &#x3D; p; pre &#x3D; p; now &#x3D; max(now, p + a[i].first - 1);</span><br><span class="line">  &#125;</span><br><span class="line">  assert(res[m - 1] + a[m - 1].first - 1 &lt; n);</span><br><span class="line"> </span><br><span class="line">  rep(i, m) printf(&quot;%d &quot;, res[i] + 1);</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>证明这种想法虽然说起来也挺简单，但是并不适合cf的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>题。</p>
<p>真正的方法是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mi>e</mi><msub><mi>s</mi><mi>i</mi></msub><mo>=</mo><mi>m</mi><mi>a</mi><mi>x</mi><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>n</mi><mo>−</mo><mi>s</mi><mi>u</mi><mi>f</mi><mo stretchy="false">[</mo><mi>i</mi><mo stretchy="false">]</mo><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">res_i=max(i, n - suf[i]+ 1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mord mathdefault">e</span><span class="mord"><span class="mord mathdefault">s</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">a</span><span class="mord mathdefault">x</span><span class="mopen">(</span><span class="mord mathdefault">i</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">s</span><span class="mord mathdefault">u</span><span class="mord mathdefault" style="margin-right:0.10764em;">f</span><span class="mopen">[</span><span class="mord mathdefault">i</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>。</p>
<p>wsl</p>
<h4 id="uoj513-线性基结论"><a class="markdownIt-Anchor" href="#uoj513-线性基结论"></a> uoj513 线性基/结论</h4>
<p><a href="http://uoj.ac/contest/51/problem/513" target="_blank" rel="noopener">http://uoj.ac/contest/51/problem/513</a></p>
<p><a href="https://www.cnblogs.com/suwakow/p/12635190.html" target="_blank" rel="noopener">https://www.cnblogs.com/suwakow/p/12635190.html</a></p>
<p>基本想出来<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>70</mn></mrow><annotation encoding="application/x-tex">70</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span><span class="mord">0</span></span></span></span>分了，又被suwakow吊打了qaq。</p>
<p>首先可以猜出来，如果有方案一定能在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">m+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>步完成（逃。</p>
<p>为什么呢？</p>
<p>考虑操作<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>，我们先令所有点为黑色，那么其实每把一个点染黑色就是这个点所连的边全部翻转。所以操作<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>只会出现一次。</p>
<p>而对于操作<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1</mn></mrow><annotation encoding="application/x-tex">1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>，其实只会出现非树边的个数次。简单环一定由非树边和所在树链构成，其实只异或一次就好了。</p>
<p>上面利用了异或的性质（我感觉我可能又会忘记），我们发现最多只需要<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mo>−</mo><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">m-(n-1)+1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>次就能完成所有操作了。</p>
<p>以上对每条边弄个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>b</mi><mi>i</mi><mi>t</mi><mi>s</mi><mi>e</mi><mi>t</mi></mrow><annotation encoding="application/x-tex">bitset</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">b</span><span class="mord mathdefault">i</span><span class="mord mathdefault">t</span><span class="mord mathdefault">s</span><span class="mord mathdefault">e</span><span class="mord mathdefault">t</span></span></span></span>线性基就是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>70</mn></mrow><annotation encoding="application/x-tex">70</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span><span class="mord">0</span></span></span></span>了，然后神仙就出场了！</p>
<p><img src="/" class="lazyload" data-src="uoj513.png"  alt="uoj513" /></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair &lt;int, int&gt;</span><br><span class="line">#define iiii pair &lt;int, pii &gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define rep(i, x) for(int (i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">  int x &#x3D; 0, p &#x3D; 1; char c &#x3D; getchar();</span><br><span class="line">  while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">  if (c &#x3D;&#x3D; 45) p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">  while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">  return x * p;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">const int mod &#x3D; 1e9 + 7;</span><br><span class="line">inline void reduce(int &amp;x) &#123; x +&#x3D; x &gt;&gt; 31 &amp; mod; &#125;</span><br><span class="line">inline int mul(int x, int y) &#123; return 1ll * x * y % mod; &#125;</span><br><span class="line">&#x2F;&#x2F;ruogu_alter</span><br><span class="line">const int N &#x3D; 305;</span><br><span class="line">int n, m;</span><br><span class="line">bitset&lt;N&gt; b, a[N], c[N];</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">bool ins(bitset&lt;N&gt; &amp;f) &#123;</span><br><span class="line">  for (int i &#x3D; n - 1; i &gt;&#x3D; 0; i--) &#123;</span><br><span class="line">    if (!f[i]) continue;</span><br><span class="line">    if (c[i].none()) return c[i] &#x3D; f, true;</span><br><span class="line">    f ^&#x3D; c[i];</span><br><span class="line">  &#125;</span><br><span class="line">  return false;</span><br><span class="line">&#125;</span><br><span class="line">void solve() &#123;</span><br><span class="line">  n &#x3D; getint(); m &#x3D; getint();</span><br><span class="line">  rep(i, n) c[i].reset(), a[i].reset();</span><br><span class="line">  b.reset();</span><br><span class="line">  for (int i &#x3D; 0; i &lt; m; i++) &#123;</span><br><span class="line">    int x &#x3D; getint() - 1, y &#x3D; getint() - 1, z &#x3D; getint();</span><br><span class="line">    a[x][y] &#x3D; a[y][x] &#x3D; 1; </span><br><span class="line">    a[x][x].flip(); a[y][y].flip();</span><br><span class="line">    b[x] &#x3D; b[x] ^ z; b[y] &#x3D; b[y] ^ z;</span><br><span class="line">  &#125;</span><br><span class="line">  rep(i, n) ins(a[i]);</span><br><span class="line">  printf(&quot;%s\n&quot;, ins(b) ? &quot;no&quot; : &quot;yes&quot;);</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">  int t &#x3D; getint();</span><br><span class="line">  rep(i, t) solve();</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>第一次知道线性基可以这么写。。下次就不用烦恼记不住了。</p>
<p>下次应该尽可能快速想出<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>70</mn></mrow><annotation encoding="application/x-tex">70</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span><span class="mord">0</span></span></span></span>。。<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>100</mn></mrow><annotation encoding="application/x-tex">100</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span></span></span></span>比较困难，毕竟所有题都是要考虑的，不能像练习一样猛想一题，历史早已证明这样做后果之严重了。</p>
<h4 id="soj911-状压dp"><a class="markdownIt-Anchor" href="#soj911-状压dp"></a> soj911 状压dp</h4>
<p>有个很显然的状压dp，就是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>m</mi><msup><mn>2</mn><mi>m</mi></msup><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nm2^m)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault">m</span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.664392em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">m</span></span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>的，有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>6</mn></mrow><annotation encoding="application/x-tex">6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span></span></span></span>的常数。我已经卡到<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3</mn></mrow><annotation encoding="application/x-tex">3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>的常数<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1.2</mn><mi>s</mi></mrow><annotation encoding="application/x-tex">1.2s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span><span class="mord">2</span><span class="mord mathdefault">s</span></span></span></span>左右，还是过不了。julao们卡常过了。。</p>
<p>正解是斜着dp。。这算是一个套路吧，以后记住了。</p>
<p><img src="/" class="lazyload" data-src="soj911.png"  alt="soj911" /></p>
<h4 id="uoj515-线段树"><a class="markdownIt-Anchor" href="#uoj515-线段树"></a> uoj515  线段树</h4>
<p>这个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>85</mn></mrow><annotation encoding="application/x-tex">85</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">8</span><span class="mord">5</span></span></span></span>好多人想到了。考虑维护一棵线段树，每个节点维护好这个区间的最长上升子序列长度以及区间最小值。查询的时候先往右边走再往左边走。这样的复杂度是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mi>l</mi><mi>o</mi><msup><mi>g</mi><mn>2</mn></msup><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(nlog^2{n})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span><span class="mord mathdefault">o</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">n</span></span><span class="mclose">)</span></span></span></span>的，可以看看sundz的代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br></pre></td><td class="code"><pre><span class="line">#include&lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define llong long long</span><br><span class="line">#define mkpr make_pair</span><br><span class="line">#define iter iterator</span><br><span class="line">#define riter reversed_iterator</span><br><span class="line">#define y1 Lorem_ipsum_dolor</span><br><span class="line">#define pii pair&lt;int,int&gt;</span><br><span class="line">using namespace std;</span><br><span class="line"></span><br><span class="line">inline int read()</span><br><span class="line">&#123;</span><br><span class="line">	int x &#x3D; 0,f &#x3D; 1; char ch &#x3D; getchar();</span><br><span class="line">	for(;!isdigit(ch);ch&#x3D;getchar()) &#123;if(ch&#x3D;&#x3D;&#39;-&#39;) f &#x3D; -1;&#125;</span><br><span class="line">	for(; isdigit(ch);ch&#x3D;getchar()) &#123;x &#x3D; x*10+ch-48;&#125;</span><br><span class="line">	return x*f;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">const int mxN &#x3D; 1e6;</span><br><span class="line">const int INF &#x3D; 1&lt;&lt;30;</span><br><span class="line">int a[mxN+3];</span><br><span class="line">int n,q;</span><br><span class="line"></span><br><span class="line">struct SegmentTree</span><br><span class="line">&#123;</span><br><span class="line">	struct SgTNode</span><br><span class="line">	&#123;</span><br><span class="line">		int mn,cnt;</span><br><span class="line">	&#125; sgt[(mxN&lt;&lt;2)+3];</span><br><span class="line">	int calc(int u,int le,int ri,int x)</span><br><span class="line">	&#123;</span><br><span class="line">&#x2F;&#x2F;		printf(&quot;calc %d %d %d\n&quot;,le,ri,x);</span><br><span class="line">		if(le&#x3D;&#x3D;ri) &#123;return sgt[u].mn&lt;x?1:0;&#125;</span><br><span class="line">		int mid &#x3D; (le+ri)&gt;&gt;1;</span><br><span class="line">		if(sgt[u&lt;&lt;1|1].mn&lt;x) &#123;return sgt[u].cnt-sgt[u&lt;&lt;1|1].cnt+calc(u&lt;&lt;1|1,mid+1,ri,x);&#125;</span><br><span class="line">		else &#123;return calc(u&lt;&lt;1,le,mid,x);&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	void pushup(int u,int le,int ri)</span><br><span class="line">	&#123;</span><br><span class="line">		int mid &#x3D; (le+ri)&gt;&gt;1;</span><br><span class="line">		sgt[u].mn &#x3D; min(sgt[u&lt;&lt;1].mn,sgt[u&lt;&lt;1|1].mn);</span><br><span class="line">		sgt[u].cnt &#x3D; sgt[u&lt;&lt;1|1].cnt+calc(u&lt;&lt;1,le,mid,sgt[u&lt;&lt;1|1].mn);</span><br><span class="line">&#x2F;&#x2F;		printf(&quot;sgt[%d].cnt&#x3D;%d\n&quot;,u,sgt[u].cnt);</span><br><span class="line">	&#125;</span><br><span class="line">	void build(int u,int le,int ri,int a[])</span><br><span class="line">	&#123;</span><br><span class="line">		if(le&#x3D;&#x3D;ri) &#123;sgt[u].mn &#x3D; a[le],sgt[u].cnt &#x3D; 1; return;&#125;</span><br><span class="line">		int mid &#x3D; (le+ri)&gt;&gt;1;</span><br><span class="line">		build(u&lt;&lt;1,le,mid,a); build(u&lt;&lt;1|1,mid+1,ri,a);</span><br><span class="line">		pushup(u,le,ri);</span><br><span class="line">	&#125;</span><br><span class="line">	void modify(int u,int le,int ri,int pos,int x)</span><br><span class="line">	&#123;</span><br><span class="line">		if(le&#x3D;&#x3D;ri) &#123;sgt[u].mn &#x3D; x; return;&#125;</span><br><span class="line">		int mid &#x3D; (le+ri)&gt;&gt;1;</span><br><span class="line">		if(pos&lt;&#x3D;mid) &#123;modify(u&lt;&lt;1,le,mid,pos,x);&#125; else &#123;modify(u&lt;&lt;1|1,mid+1,ri,pos,x);&#125;</span><br><span class="line">		pushup(u,le,ri);</span><br><span class="line">	&#125;</span><br><span class="line">	pii query(int u,int le,int ri,int lb,int rb,int x)</span><br><span class="line">	&#123;</span><br><span class="line">&#x2F;&#x2F;		printf(&quot;[%d,%d] %d\n&quot;,le,ri,x);</span><br><span class="line">		if(le&gt;&#x3D;lb&amp;&amp;ri&lt;&#x3D;rb) &#123;return mkpr(min(x,sgt[u].mn),calc(u,le,ri,x));&#125;</span><br><span class="line">		int mid &#x3D; (le+ri)&gt;&gt;1;</span><br><span class="line">		if(rb&lt;&#x3D;mid) return query(u&lt;&lt;1,le,mid,lb,rb,x);</span><br><span class="line">		else if(lb&gt;mid) return query(u&lt;&lt;1|1,mid+1,ri,lb,rb,x);</span><br><span class="line">		else</span><br><span class="line">		&#123;</span><br><span class="line">			pii retr &#x3D; query(u&lt;&lt;1|1,mid+1,ri,mid+1,rb,x),retl &#x3D; query(u&lt;&lt;1,le,mid,lb,mid,min(sgt[u&lt;&lt;1|1].mn,x));</span><br><span class="line">			return mkpr(retl.first,retr.second+retl.second);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125; sgt;</span><br><span class="line"></span><br><span class="line">int main()</span><br><span class="line">&#123;</span><br><span class="line">	n &#x3D; read(),q &#x3D; read();</span><br><span class="line">	for(int i&#x3D;1; i&lt;&#x3D;n; i++) a[i] &#x3D; read();</span><br><span class="line">	sgt.build(1,1,n,a);</span><br><span class="line">	while(q--)</span><br><span class="line">	&#123;</span><br><span class="line">		int opt &#x3D; read();</span><br><span class="line">		if(opt&#x3D;&#x3D;2)</span><br><span class="line">		&#123;</span><br><span class="line">			int l &#x3D; read();</span><br><span class="line">			pii ans &#x3D; sgt.query(1,1,n,l,n,INF);</span><br><span class="line">			printf(&quot;%d\n&quot;,ans.second);</span><br><span class="line">		&#125;</span><br><span class="line">		else</span><br><span class="line">		&#123;</span><br><span class="line">			int x &#x3D; read(),val &#x3D; read();</span><br><span class="line">			sgt.modify(1,1,n,x,val);</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">	return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>tql！</p>
<p>至于正解，首先要学会segment_tree beats。</p>
<p>然后把问题转换成扫描线——从后往前加入，维护按时间的线段树。我们这时只有两件事情：</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1.</mn></mrow><annotation encoding="application/x-tex">1.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span></span></span></span>区间取<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span></span></span></span>。</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2.</mn></mrow><annotation encoding="application/x-tex">2.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">.</span></span></span></span>单点求该点取<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>m</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span></span></span></span>了多少次。</p>
<p>这时，我们可以如同segment_tree beats的套路一样，维护区间最大值，次大值以及标记即可。</p>
<p>详见代码。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair &lt;int, int&gt;</span><br><span class="line">#define iiii pair &lt;int, pii &gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define rep(i, x) for(int (i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">#define getchar() (*input_pos++)</span><br><span class="line">const int TT &#x3D; 5e7;</span><br><span class="line">char input_buffer[TT], output_buffer[TT];</span><br><span class="line">char *input_pos &#x3D; input_buffer, *output_pos &#x3D; output_buffer;</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">  int x &#x3D; 0, p &#x3D; 1; char c &#x3D; getchar();</span><br><span class="line">  while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">  if (c &#x3D;&#x3D; 45) p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">  while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">  return x * p;</span><br><span class="line">&#125;</span><br><span class="line">void write(int x) &#123;</span><br><span class="line">  if (!x) return;</span><br><span class="line">  write(x &#x2F; 10); *output_pos++ &#x3D; &#39;0&#39; + x % 10;</span><br><span class="line">&#125;</span><br><span class="line">void writeln(int x) &#123;</span><br><span class="line">  write(x);</span><br><span class="line">  *output_pos++ &#x3D; &#39;\n&#39;;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">const int mod &#x3D; 1e9 + 7;</span><br><span class="line">inline void reduce(int &amp;x) &#123; x +&#x3D; x &gt;&gt; 31 &amp; mod; &#125;</span><br><span class="line">inline int mul(int x, int y) &#123; return 1ll * x * y % mod; &#125;</span><br><span class="line">&#x2F;&#x2F;ruogu_alter</span><br><span class="line">const int N &#x3D; 1e6 + 5;</span><br><span class="line">int n, q, res[N], mx[N &lt;&lt; 2], mx2[N &lt;&lt; 2], tag[N &lt;&lt; 2];</span><br><span class="line">vector&lt;iiii&gt; a[N];</span><br><span class="line">vector&lt;int&gt; vq[N];</span><br><span class="line">bool fg[N];</span><br><span class="line">pii lst[N];</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">void pd(int k) &#123;</span><br><span class="line">  if (tag[k]) &#123;</span><br><span class="line">    if (mx[2 * k + 1] &gt; mx[k]) tag[2 * k + 1] +&#x3D; tag[k], mx[2 * k + 1] &#x3D; mx[k];</span><br><span class="line">    if (mx[2 * k + 2] &gt; mx[k]) tag[2 * k + 2] +&#x3D; tag[k], mx[2 * k + 2] &#x3D; mx[k];</span><br><span class="line">    tag[k] &#x3D; 0;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">void up(int k) &#123;</span><br><span class="line">  mx[k] &#x3D; max(mx[2 * k + 1], mx[2 * k + 2]);</span><br><span class="line">  if (mx[2 * k + 1] &#x3D;&#x3D; mx[2 * k + 2]) &#123;</span><br><span class="line">    mx2[k] &#x3D; max(mx2[2 * k + 1], mx2[2 * k + 2]);</span><br><span class="line">  &#125;</span><br><span class="line">  else if (mx[2 * k + 1] &gt; mx[2 * k + 2]) &#123;</span><br><span class="line">    mx2[k] &#x3D; max(mx2[2 * k + 1], mx[2 * k + 2]);</span><br><span class="line">  &#125;</span><br><span class="line">  else &#123;</span><br><span class="line">    mx2[k] &#x3D; max(mx[2 * k + 1], mx2[2 * k + 2]);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">void modify(int l, int r, int x, int y, int k, int v) &#123;</span><br><span class="line">  if (l &gt;&#x3D; y || x &gt;&#x3D; r || v &gt;&#x3D; mx[k]) return;</span><br><span class="line">  if (x &lt;&#x3D; l &amp;&amp; r &lt;&#x3D; y &amp;&amp; v &gt; mx2[k]) &#123;</span><br><span class="line">    ++tag[k]; mx[k] &#x3D; v;</span><br><span class="line">    return;</span><br><span class="line">  &#125; </span><br><span class="line">  int mid &#x3D; (l + r) &gt;&gt; 1; pd(k);</span><br><span class="line">  modify(l, mid, x, y, 2 * k + 1, v);</span><br><span class="line">  modify(mid, r, x, y, 2 * k + 2, v);</span><br><span class="line">  up(k);</span><br><span class="line">&#125;</span><br><span class="line">int qry(int l, int r, int p, int k) &#123;</span><br><span class="line">  if (r - l &#x3D;&#x3D; 1) return tag[k];</span><br><span class="line">  int mid &#x3D; (l + r) &gt;&gt; 1; pd(k);</span><br><span class="line">  if (p &lt; mid) return qry(l, mid, p, 2 * k + 1);</span><br><span class="line">  else return qry(mid, r, p, 2 * k + 2);</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">  fread(input_buffer, 1, TT, stdin);</span><br><span class="line">  memset(mx2, -1, sizeof(mx2));</span><br><span class="line">  rep(i, N &lt;&lt; 2) mx[i] &#x3D; INF;</span><br><span class="line">  n &#x3D; getint(); q &#x3D; getint();</span><br><span class="line">  for (int i &#x3D; 0; i &lt; n; i++) lst[i] &#x3D; mp(getint(), 0);</span><br><span class="line">  rep(i, q) &#123;</span><br><span class="line">    int op &#x3D; getint(), x &#x3D; getint() - 1;</span><br><span class="line">    if (op &#x3D;&#x3D; 1) &#123;</span><br><span class="line">      int y &#x3D; getint();</span><br><span class="line">      a[x].emplace_back(lst[x].first, mp(lst[x].second, i));</span><br><span class="line">      lst[x] &#x3D; mp(y, i);</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">      vq[x].emplace_back(i);</span><br><span class="line">      fg[i] &#x3D; true;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  rep(i, n) a[i].emplace_back(lst[i].first, mp(lst[i].second, q));</span><br><span class="line">  for (int i &#x3D; n - 1; i &gt;&#x3D; 0; i--) &#123;</span><br><span class="line">    for (auto &amp;u : a[i]) &#123;</span><br><span class="line">      modify(0, q, u.second.first, u.second.second, 0, u.first);</span><br><span class="line">    &#125;</span><br><span class="line">    for (auto &amp;u : vq[i]) res[u] &#x3D; qry(0, q, u, 0);</span><br><span class="line">  &#125;</span><br><span class="line">  rep(i, q) if (fg[i]) writeln(res[i]);</span><br><span class="line">  fwrite(output_buffer, 1, output_pos - output_buffer, stdout);</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="uoj66-结论数学"><a class="markdownIt-Anchor" href="#uoj66-结论数学"></a> uoj66 结论/数学</h4>
<p><a href="http://uoj.ac/problem/66" target="_blank" rel="noopener">http://uoj.ac/problem/66</a></p>
<p>直接猜嘛，是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2</mn></mrow><annotation encoding="application/x-tex">2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span>的幂次肯定好。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">var t, n, i, ii, res, c: longint;</span><br><span class="line">begin</span><br><span class="line">	read(t);</span><br><span class="line">	for ii :&#x3D; 1 to t do begin</span><br><span class="line">		read(n); c :&#x3D; 1; res :&#x3D; 0;</span><br><span class="line">		while n &gt; 0 do begin</span><br><span class="line">			if n mod 2 &#x3D; 1 then begin</span><br><span class="line">				res :&#x3D; res + c - 1;</span><br><span class="line">			end;</span><br><span class="line">			c :&#x3D; c * 2;</span><br><span class="line">			n :&#x3D; n div 2;</span><br><span class="line">		end;</span><br><span class="line">		writeln(res);</span><br><span class="line">	end;</span><br><span class="line">end.</span><br></pre></td></tr></table></figure>
<p><img src="/" class="lazyload" data-src="uoj66.png"  alt="uoj66" /></p>
<p>这题练习了我的猜结论能力，反应能力，归纳证明能力，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mi>a</mi><mi>s</mi><mi>c</mi><mi>a</mi><mi>l</mi></mrow><annotation encoding="application/x-tex">pascal</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mord mathdefault">a</span><span class="mord mathdefault">s</span><span class="mord mathdefault">c</span><span class="mord mathdefault">a</span><span class="mord mathdefault" style="margin-right:0.01968em;">l</span></span></span></span>代码能力，正是一石四鸟的好题！</p>
<h4 id="soj920loj6213-结论斜率优化"><a class="markdownIt-Anchor" href="#soj920loj6213-结论斜率优化"></a> soj920/loj6213 结论/斜率优化</h4>
<p><a href="http://120.27.222.204:12243/problem/920" target="_blank" rel="noopener">http://120.27.222.204:12243/problem/920</a></p>
<p>有个显然的<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>50</mn></mrow><annotation encoding="application/x-tex">50</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">0</span></span></span></span>。首先知道这个三角形的高要么<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>0</mn></mrow><annotation encoding="application/x-tex">0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>要么<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>b</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">b_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>。</p>
<p>证明：假设其他三角形已经取到最优解了（肯定没有互相包含）。令这个三角形高为<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>，假设左边三角形右端点距它中点距离<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi></mrow><annotation encoding="application/x-tex">p</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span></span></span></span>，右边左端点距它中点距离<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>q</mi></mrow><annotation encoding="application/x-tex">q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span></span></span>，令<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>p</mi><mo>≤</mo><mi>q</mi></mrow><annotation encoding="application/x-tex">p\leq q</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">p</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span></span></span></span>，那么它的贡献是个分段下凸二次函数。</p>
<p>我手算了一下，如果某个二次函数原来已经变成单调增的了，当变成下个二次函数的时候，下一个二次函数的对称轴在该变化点左侧，也就是仍是单调增。</p>
<p>还有个性质，三角形不会互相包含。</p>
<p>然后暴力枚举就有<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>50</mn></mrow><annotation encoding="application/x-tex">50</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">5</span><span class="mord">0</span></span></span></span>。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair &lt;int, int&gt;</span><br><span class="line">#define iiii pair &lt;int, pii &gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define rep(i, x) for(int (i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">  int x &#x3D; 0, p &#x3D; 1; char c &#x3D; getchar();</span><br><span class="line">  while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">  if (c &#x3D;&#x3D; 45) p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">  while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">  return x * p;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">const int mod &#x3D; 1e9 + 7;</span><br><span class="line">inline void reduce(int &amp;x) &#123; x +&#x3D; x &gt;&gt; 31 &amp; mod; &#125;</span><br><span class="line">inline int mul(int x, int y) &#123; return 1ll * x * y % mod; &#125;</span><br><span class="line">&#x2F;&#x2F;ruogu_alter</span><br><span class="line">const ll inf &#x3D; 2e18;</span><br><span class="line">const int N &#x3D; 25;</span><br><span class="line">ll res;</span><br><span class="line">int n, a[N], b[N], p[N];</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">bool cmp(int x, int y) &#123;</span><br><span class="line">  return a[x] - b[x] &lt; a[y] - b[y];</span><br><span class="line">&#125;</span><br><span class="line">int main() &#123;</span><br><span class="line">  n &#x3D; getint();</span><br><span class="line">  rep(i, n) a[i] &#x3D; getint(), b[i] &#x3D; getint(), p[i] &#x3D; getint();</span><br><span class="line">  rep(mask, 1 &lt;&lt; n) &#123;</span><br><span class="line">    bool fg &#x3D; true;</span><br><span class="line">    rep(i, n) if (mask &gt;&gt; i &amp; 1) &#123;</span><br><span class="line">      for (int j &#x3D; i + 1; j &lt; n; j++) if (mask &gt;&gt; j &amp; 1) &#123;</span><br><span class="line">        if (a[i] - b[i] &lt;&#x3D; a[j] - b[j] &amp;&amp; a[i] + b[i] &gt;&#x3D; a[j] + b[j]) &#123;</span><br><span class="line">          fg &#x3D; false; break;</span><br><span class="line">        &#125;</span><br><span class="line">        if (a[j] - b[j] &lt;&#x3D; a[i] - b[i] &amp;&amp; a[j] + b[j] &gt;&#x3D; a[i] + b[i]) &#123;</span><br><span class="line">          fg &#x3D; false; break;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      if (!fg) break;</span><br><span class="line">    &#125;</span><br><span class="line">    if (!fg) continue;</span><br><span class="line">    vector&lt;int&gt; v;</span><br><span class="line">    rep(i, n) if (mask &gt;&gt; i &amp; 1) v.emplace_back(i);</span><br><span class="line">    sort(v.begin(), v.end(), cmp);</span><br><span class="line">    ll ans &#x3D; 0;</span><br><span class="line">    rep(i, v.size()) &#123;</span><br><span class="line">      int x &#x3D; v[i];</span><br><span class="line">      ans -&#x3D; 4ll * p[x] * b[x];</span><br><span class="line">      ans +&#x3D; 4ll * b[x] * b[x];</span><br><span class="line">      if (!i) continue;</span><br><span class="line">      int px &#x3D; a[v[i - 1]] + b[v[i - 1]], py &#x3D; a[x] - b[x];</span><br><span class="line">      if (py &lt; px) &#123;</span><br><span class="line">        ans -&#x3D; 1ll * (px - py) * (px - py);</span><br><span class="line">      &#125; </span><br><span class="line">    &#125;</span><br><span class="line">    res &#x3D; max(res, ans);</span><br><span class="line">  &#125;</span><br><span class="line">  cout &lt;&lt; res &lt;&lt; endl;</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>然后<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>65</mn></mrow><annotation encoding="application/x-tex">65</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">5</span></span></span></span>挺显然的吧，直接把三角形排序，令<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><msub><mi>p</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">dp_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault">d</span><span class="mord"><span class="mord mathdefault">p</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>表示以<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>结尾最大权值是什么。</p>
<p>然后是正解：</p>
<p><img src="/" class="lazyload" data-src="soj920.png"  alt="soj920" /></p>
<p>其实也不必要李超树，直接在凸包上二分就行了。</p>
<p>这题还是想的速度太慢，到比赛最后才猜出取值只有两种，这类题目应该就是这样吧，否则还能咋样（退火/爬山）？</p>
<h4 id="soj921loj3285"><a class="markdownIt-Anchor" href="#soj921loj3285"></a> soj921/loj3285</h4>
<p><a href="http://120.27.222.204:12243/problem/921" target="_blank" rel="noopener">http://120.27.222.204:12243/problem/921</a></p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>60</mn></mrow><annotation encoding="application/x-tex">60</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span><span class="mord">0</span></span></span></span>很easy。</p>
<p>正解不会。</p>
<h4 id="soj922-数论杜教筛容斥原理"><a class="markdownIt-Anchor" href="#soj922-数论杜教筛容斥原理"></a> soj922 数论/杜教筛/容斥原理</h4>
<p><a href="http://120.27.222.204:12243/problem/922" target="_blank" rel="noopener">http://120.27.222.204:12243/problem/922</a></p>
<p>竟然没想出来qaq。我不知道打比赛的时候我脑子哪里错了。</p>
<p><img src="/" class="lazyload" data-src="soj922.png"  alt="soj922" /></p>
<p>除了杜教筛，有一个注意点是要对每个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">⌊</mo><mfrac><mi>n</mi><mi>x</mi></mfrac><mo stretchy="false">⌋</mo></mrow><annotation encoding="application/x-tex">\lfloor\frac{n}{x}\rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.095em;vertical-align:-0.345em;"></span><span class="mopen">⌊</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">⌋</span></span></span></span>，求<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>0</mn></mrow><mrow><mo stretchy="false">⌊</mo><mfrac><mi>n</mi><mi>x</mi></mfrac><mo stretchy="false">⌋</mo></mrow></msubsup><msup><mi>i</mi><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">\sum\limits_{i=0}^{\lfloor\frac{n}{x}\rfloor}i^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:2.7044740000000003em;vertical-align:-0.9776689999999999em;"></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7268050000000001em;"><span style="top:-2.122331em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">0</span></span></span></span><span style="top:-3.0000050000000003em;"><span class="pstrut" style="height:3em;"></span><span><span class="mop op-symbol small-op">∑</span></span></span><span style="top:-4.101805em;margin-left:0em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">⌊</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915428571428572em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span style="top:-3.2255000000000003em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.344em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span><span class="mclose mtight">⌋</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.9776689999999999em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">i</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.849108em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>，用sundz法，我们可以设一个阀值<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi></mrow><annotation encoding="application/x-tex">B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>，当<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mo stretchy="false">⌊</mo><mfrac><mi>n</mi><mi>x</mi></mfrac><mo stretchy="false">⌋</mo><mo>≤</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">\lfloor\frac{n}{x}\rfloor\leq B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.095em;vertical-align:-0.345em;"></span><span class="mopen">⌊</span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.695392em;"><span style="top:-2.6550000000000002em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">x</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight">n</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">⌋</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>时，我们用线性筛爆算自然数幂和，否则插值。在这题中，复杂度是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mi>k</mi><mi mathvariant="normal">/</mi><mi>B</mi><mo>+</mo><mi>B</mi></mrow><annotation encoding="application/x-tex">nk/B+B</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord">/</span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span></span></span></span>，令<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>B</mi><mo>=</mo><msqrt><mrow><mi>n</mi><mi>k</mi></mrow></msqrt></mrow><annotation encoding="application/x-tex">B=\sqrt{nk}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.05017em;">B</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.10777999999999999em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.93222em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span><span style="top:-2.89222em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,
-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,
-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,
35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,
-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467
s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422
s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.10777999999999999em;"><span></span></span></span></span></span></span></span></span>，最终复杂度就是<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><msqrt><mrow><mi>n</mi><mi>k</mi></mrow></msqrt><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(\sqrt{nk})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.18222em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.93222em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord mathdefault">n</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span></span></span><span style="top:-2.89222em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,
-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,
-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,
35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,
-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467
s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422
s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.10777999999999999em;"><span></span></span></span></span></span><span class="mclose">)</span></span></span></span>。</p>
<h4 id="uoj514-生成函数容斥计数"><a class="markdownIt-Anchor" href="#uoj514-生成函数容斥计数"></a> uoj514 生成函数/容斥/计数</h4>
<p><a href="http://uoj.ac/problem/514" target="_blank" rel="noopener">http://uoj.ac/problem/514</a></p>
<p>不会。</p>
<h4 id="soj84-高斯消元异或方程组"><a class="markdownIt-Anchor" href="#soj84-高斯消元异或方程组"></a> soj84 高斯消元/异或方程组</h4>
<p><a href="http://120.27.222.204:12243/problem/84" target="_blank" rel="noopener">http://120.27.222.204:12243/problem/84</a></p>
<p>我吐了，这样的题我都不会。。</p>
<p>首先明确题意，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span></span>图指的是所有点度数是偶数的图。</p>
<p>两句话：</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1.</mn></mrow><annotation encoding="application/x-tex">1.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span></span></span></span>当是树的时候只有两种分配方法，按度数奇偶性分配。</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2.</mn></mrow><annotation encoding="application/x-tex">2.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">.</span></span></span></span>对于每个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>i</mi></mrow><annotation encoding="application/x-tex">i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord mathdefault">i</span></span></span></span>，令<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>表示它的集合，要求<span class="katex"><span class="katex-mathml"><math><semantics><mrow><msub><mo>⨁</mo><mrow><mo stretchy="false">(</mo><mi>i</mi><mo separator="true">,</mo><mi>j</mi><mo stretchy="false">)</mo><mo>∈</mo><mi>E</mi></mrow></msub><mo stretchy="false">(</mo><msub><mi>x</mi><mi>i</mi></msub><mo>⊕</mo><msub><mi>x</mi><mi>j</mi></msub><mo>⊕</mo><mn>1</mn><mo stretchy="false">)</mo><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\bigoplus_{(i,j)\in E} (x_i \oplus x_j \oplus 1)=0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.22471em;vertical-align:-0.47471em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:-0.0000050000000000050004em;">⨁</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.22528999999999993em;"><span style="top:-2.40029em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathdefault mtight">i</span><span class="mpunct mtight">,</span><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span><span class="mclose mtight">)</span><span class="mrel mtight">∈</span><span class="mord mathdefault mtight" style="margin-right:0.05764em;">E</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.47471em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8694379999999999em;vertical-align:-0.286108em;"></span><span class="mord"><span class="mord mathdefault">x</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.311664em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.05724em;">j</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.286108em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">⊕</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">0</span></span></span></span>。然后直接高斯消元就完啦。</p>
<h4 id="cf1333f-模拟"><a class="markdownIt-Anchor" href="#cf1333f-模拟"></a> cf1333F 模拟</h4>
<p><a href="https://codeforces.com/contest/1333/problem/F" target="_blank" rel="noopener">https://codeforces.com/contest/1333/problem/F</a></p>
<p>这破题就是个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>d</mi><mi>i</mi><mi>v</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">div2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault">d</span><span class="mord mathdefault">i</span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mord">2</span></span></span></span> <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi></mrow><annotation encoding="application/x-tex">A</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span></span></span></span>吧。直接<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>9</mn><mi>m</mi><mi>i</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">9min</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.65952em;vertical-align:0em;"></span><span class="mord">9</span><span class="mord mathdefault">m</span><span class="mord mathdefault">i</span><span class="mord mathdefault">n</span></span></span></span>就<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>A</mi><mi>C</mi></mrow><annotation encoding="application/x-tex">AC</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathdefault">A</span><span class="mord mathdefault" style="margin-right:0.07153em;">C</span></span></span></span>了。</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>1.</mn></mrow><annotation encoding="application/x-tex">1.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span><span class="mord">.</span></span></span></span>如果在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>和<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mi>x</mi></mrow><annotation encoding="application/x-tex">kx</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault">x</span></span></span></span>中选一个，肯定选<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>x</mi></mrow><annotation encoding="application/x-tex">x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>。</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>2.</mn></mrow><annotation encoding="application/x-tex">2.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span><span class="mord">.</span></span></span></span>如果要让<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>g</mi><mi>c</mi><mi>d</mi><mo>&lt;</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">gcd&lt;x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">g</span><span class="mord mathdefault">c</span><span class="mord mathdefault">d</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>，对于每个<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>y</mi><mo>≥</mo><mi>x</mi></mrow><annotation encoding="application/x-tex">y \geq x</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8304100000000001em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">x</span></span></span></span>，<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>k</mi><mi>y</mi><mo stretchy="false">(</mo><mi>k</mi><mo>&gt;</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">ky(k&gt;1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mord mathdefault" style="margin-right:0.03588em;">y</span><span class="mopen">(</span><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span></span></span></span>一定不选。</p>
<p>那直接倒着扫一遍就完啦。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair &lt;int, int&gt;</span><br><span class="line">#define iiii pair &lt;int, pii &gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define rep(i, x) for(int (i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">  int x &#x3D; 0, p &#x3D; 1; char c &#x3D; getchar();</span><br><span class="line">  while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">  if (c &#x3D;&#x3D; 45) p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">  while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">  return x * p;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">const int mod &#x3D; 1e9 + 7;</span><br><span class="line">inline void reduce(int &amp;x) &#123; x +&#x3D; x &gt;&gt; 31 &amp; mod; &#125;</span><br><span class="line">inline int mul(int x, int y) &#123; return 1ll * x * y % mod; &#125;</span><br><span class="line">&#x2F;&#x2F;ruogu_alter</span><br><span class="line">const int N &#x3D; 5e5 + 5;</span><br><span class="line">int n, res[N];</span><br><span class="line">bool fg[N];</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">int main() &#123;</span><br><span class="line">  n &#x3D; getint();</span><br><span class="line">  int p &#x3D; n, c &#x3D; n;</span><br><span class="line">  for (int i &#x3D; 2; i &lt;&#x3D; n; i++) res[i] &#x3D; 1;</span><br><span class="line">  for (int i &#x3D; n; i &gt;&#x3D; 1; i--) &#123;</span><br><span class="line">    for (int j &#x3D; i + i; j &lt;&#x3D; n; j +&#x3D; i) &#123;</span><br><span class="line">      if (!fg[j]) &#123; fg[j] &#x3D; true; --c; &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    while (p &gt; c) res[p--] &#x3D; i;</span><br><span class="line">  &#125;</span><br><span class="line">  for (int i &#x3D; 2; i &lt;&#x3D; n; i++) printf(&quot;%d &quot;, res[i]);</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="cf1333e-构造"><a class="markdownIt-Anchor" href="#cf1333e-构造"></a> cf1333E 构造</h4>
<p>这题反倒想了比较久。初始没想出来<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>3</mn><mo>∗</mo><mn>3</mn></mrow><annotation encoding="application/x-tex">3*3</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span></span></span></span>怎么构造。</p>
<p><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mrow><mo fence="true">[</mo><mtable rowspacing="0.15999999999999992em" columnspacing="1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>1</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>6</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>5</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>2</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>8</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>9</mn></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>7</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>3</mn></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="false"><mn>4</mn></mstyle></mtd></mtr></mtable><mo fence="true">]</mo></mrow><mspace width="1em"/></mrow><annotation encoding="application/x-tex">\begin{bmatrix} 1&amp;6&amp;5\\2&amp;8&amp;9\\7&amp;3&amp;4 \end{bmatrix}\quad</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.60004em;vertical-align:-1.55002em;"></span><span class="minner"><span class="mopen"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎣</span></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎡</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span><span class="mord"><span class="mtable"><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">1</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">2</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">7</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">6</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">8</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">3</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:0.5em;"></span><span class="arraycolsep" style="width:0.5em;"></span><span class="col-align-c"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05em;"><span style="top:-4.21em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">5</span></span></span><span style="top:-3.0099999999999993em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">9</span></span></span><span style="top:-1.8099999999999994em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord">4</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.5500000000000007em;"><span></span></span></span></span></span></span></span><span class="mclose"><span class="delimsizing mult"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:2.05002em;"><span style="top:-2.2500000000000004em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎦</span></span></span><span style="top:-4.05002em;"><span class="pstrut" style="height:3.1550000000000002em;"></span><span class="delimsizinginner delim-size4"><span>⎤</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.55002em;"><span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:1em;"></span></span></span></span></p>
<p>主要宗旨是让<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>q</mi><mi>u</mi><mi>e</mi><mi>e</mi><mi>n</mi></mrow><annotation encoding="application/x-tex">queen</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">q</span><span class="mord mathdefault">u</span><span class="mord mathdefault">e</span><span class="mord mathdefault">e</span><span class="mord mathdefault">n</span></span></span></span>的第八步在<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>9</mn></mrow><annotation encoding="application/x-tex">9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span></span></span></span>的那个位置，使她离最后一步<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>7</mn></mrow><annotation encoding="application/x-tex">7</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span></span></span></span>差一个小飞。</p>
<p>把<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>n</mi><mo>∗</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">n*n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.46528em;vertical-align:0em;"></span><span class="mord mathdefault">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">∗</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">n</span></span></span></span>的最后<span class="katex"><span class="katex-mathml"><math><semantics><mrow><mn>9</mn></mrow><annotation encoding="application/x-tex">9</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">9</span></span></span></span>步这样分配在左上角，就ok了。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">#include &lt;bits&#x2F;stdc++.h&gt;</span><br><span class="line">#define ld double</span><br><span class="line">#define ull unsigned long long</span><br><span class="line">#define ll long long</span><br><span class="line">#define pii pair &lt;int, int&gt;</span><br><span class="line">#define iiii pair &lt;int, pii &gt;</span><br><span class="line">#define mp make_pair</span><br><span class="line">#define INF 1000000000</span><br><span class="line">#define rep(i, x) for(int (i) &#x3D; 0; (i) &lt; (x); (i)++)</span><br><span class="line">inline int getint() &#123;</span><br><span class="line">  int x &#x3D; 0, p &#x3D; 1; char c &#x3D; getchar();</span><br><span class="line">  while (c &lt;&#x3D; 32) c &#x3D; getchar();</span><br><span class="line">  if (c &#x3D;&#x3D; 45) p &#x3D; -p, c &#x3D; getchar();</span><br><span class="line">  while (c &gt; 32) x &#x3D; x * 10 + c - 48, c &#x3D; getchar();</span><br><span class="line">  return x * p;</span><br><span class="line">&#125;</span><br><span class="line">using namespace std;</span><br><span class="line">const int mod &#x3D; 1e9 + 7;</span><br><span class="line">inline void reduce(int &amp;x) &#123; x +&#x3D; x &gt;&gt; 31 &amp; mod; &#125;</span><br><span class="line">inline int mul(int x, int y) &#123; return 1ll * x * y % mod; &#125;</span><br><span class="line">&#x2F;&#x2F;ruogu_alter</span><br><span class="line">const int N &#x3D; 505;</span><br><span class="line">int n, a[N][N];</span><br><span class="line">&#x2F;&#x2F;</span><br><span class="line">int main() &#123;</span><br><span class="line">  n &#x3D; getint();</span><br><span class="line">  if (n &lt;&#x3D; 2) return !printf(&quot;%d\n&quot;, -1);</span><br><span class="line">  int p &#x3D; n * n;</span><br><span class="line">  a[1][2] &#x3D; p--; a[1][1] &#x3D; p--; a[2][0] &#x3D; p--;</span><br><span class="line">  a[0][1] &#x3D; p--; a[0][2] &#x3D; p--; a[2][2] &#x3D; p--;</span><br><span class="line">  a[2][1] &#x3D; p--; a[1][0] &#x3D; p--; a[0][0] &#x3D; p--;</span><br><span class="line">  for (int i &#x3D; 3; i &lt; n; i++) &#123;</span><br><span class="line">    if (i &amp; 1) &#123;</span><br><span class="line">      int x &#x3D; 0, y &#x3D; i;</span><br><span class="line">      while (x &lt;&#x3D; i) a[x++][y] &#x3D; p--;</span><br><span class="line">      x &#x3D; i, y &#x3D; i - 1;</span><br><span class="line">      while (y &gt;&#x3D; 0) a[x][y--] &#x3D; p--;</span><br><span class="line">    &#125;</span><br><span class="line">    else &#123;</span><br><span class="line">      int x &#x3D; i, y &#x3D; 0;</span><br><span class="line">      while (y &lt;&#x3D; i) a[x][y++] &#x3D; p--;</span><br><span class="line">      x &#x3D; i - 1, y &#x3D; i;</span><br><span class="line">      while (x &gt;&#x3D; 0) a[x--][y] &#x3D; p--;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  rep(i, n) &#123;</span><br><span class="line">    rep(j, n) printf(&quot;%d &quot;, a[i][j]);</span><br><span class="line">    printf(&quot;\n&quot;);</span><br><span class="line">  &#125;</span><br><span class="line">  return 0;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="cf1333c-two-pointers"><a class="markdownIt-Anchor" href="#cf1333c-two-pointers"></a> cf1333C two pointers</h4>
<p><a href="https://codeforces.com/contest/1333/problem/C" target="_blank" rel="noopener">https://codeforces.com/contest/1333/problem/C</a></p>
<p>虽然也会，但是想的有点复杂。</p>
<p>其实直接考虑固定右端点，有多少个左端点就行，可以two pointers维护。</p>
<p><a href="https://codeforces.com/contest/1333/submission/75850582" target="_blank" rel="noopener">https://codeforces.com/contest/1333/submission/75850582</a></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">ruogu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://ruogu-alter.github.io/2020/04/01/%E6%9D%82%E9%A2%98-%E4%B8%80/">http://ruogu-alter.github.io/2020/04/01/%E6%9D%82%E9%A2%98-%E4%B8%80/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://ruogu-alter.github.io" target="_blank">ruogu's blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%80%BB%E7%BB%93/">总结</a></div><div class="post_share"><div class="social-share" data-image="/img/saber.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><nav class="pagination_post" id="pagination"><div class="prev-post pull_left"><a href="/2020/04/03/min25%E7%AD%9B/"><img class="prev_cover lazyload" data-src="/img/saber.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">min25筛</div></div></a></div><div class="next-post pull_right"><a href="/2020/03/31/JOISC2020/"><img class="next_cover lazyload" data-src="/img/saber.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">JOISC2020</div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> 评论</span></div><div id="disqus_thread"></div><script>var disqus_config = function () {
  this.page.url = 'http://ruogu-alter.github.io/2020/04/01/%E6%9D%82%E9%A2%98-%E4%B8%80/';
  this.page.identifier = '2020/04/01/杂题-一/';
  this.page.title = '杂题（一）';
};
(function() { 
  var d = document, s = d.createElement('script');
  s.src = 'https://ruogu-alter.disqus.com/embed.js';
  s.setAttribute('data-timestamp', +new Date());
  (d.head || d.body).appendChild(s);
})();
</script><script>function getDisqusCount() {
  var d = document, s = d.createElement('script');
  s.src = 'https://ruogu-alter.disqus.com/count.js';
  s.id = 'dsq-count-scr';
  (d.head || d.body).appendChild(s);
}

window.addEventListener('load', getDisqusCount, false);</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2020 By ruogu</div><div class="framework-info"><span>驱动 </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>主题 </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="阅读模式"></i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换" target="_self">簡</a></div><div id="rightside-config-show"><div id="rightside_config" title="设置"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="直达评论"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="目录" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="回到顶部" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex@latest/dist/katex.min.css"><script src="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.js"></script><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/katex-copytex@latest/dist/katex-copytex.min.css"><script>$(function () {
  $('span.katex-display').wrap('<div class="katex-wrap"></div>')
})</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lazysizes@latest/lazysizes.min.js" async=""></script></body></html>